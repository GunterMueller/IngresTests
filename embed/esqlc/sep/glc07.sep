/*
	Test Name: pza03sc.sep
	Time: 27-AUG-1991 10:34:42
	User Name: testenv
	Terminal type: septerm
 
	Test ID : pza03sc
	Module  : 3gl
	Filename: pza03s.sep
	Purpose	: To test sql/forms stmts add/put/getform, get/put/deleterow
	Input Files  :
	Output Files :
	Database     :	SEPPARAMDB (personnel)
	Tables       :	professor, student
	Synopsis     :	This application uses two ingres forms to test the 
			update and fill modes and the following sql/forms 
			statements:  addform, putform, getform, getrow, putrow, 
			deleterow.

	History: 27-AUG-1991	Created				Author: saundra
		 01-JUL-1992  	Modified (jpark)
			Modified filenames to conform to DOS specs of
			8 character filenames and 3 character extensions.
			Also, replaced hard-code database names to 
			SEPPARAMDB.
                 18-FEB-1993    Modified (bobs)
                        Added "int" return from main (apxb.sc) and added
                        "exit(0)" at end of main program, for compatibility
                        with Tools for Windows.
                1-FEB-1993      Modified (jpark)
                        Combined VMS and UNIX tests with .if.else command.
                        Also, platform specific adjustments were made.
                NOTE:   SEPPARAM_SYSTEM must be set to the value returned
                        by a "uname" command.  (In VMS, the value is set
                        to "VMS")
	        24-AUG-1993     Modified (alices) helping jbryson
			Changed SEPPARAMPERSONNE to SEPPARAMDB and updated
			apxd.sc for 6.5.
                26-OCT-1993      Modified (alices)
			Replaced .if SEPPARAM_SYSTEM = "VMS" with .if (VMS)
          20-Jan-1995	(qiuji01) Changed canon for copyright and replaced 
			deleter with delobj.
           01-Apr-1997	(chiel02)  Modified for Windows NT.
                                   Added an alternate canon each for the sepcc comma-
nds.
                                   Changed the delobj command to its correct syntax.
	   07-Apr-1998	(uptad01) Added alternate canon for COPYFORM as it
                         Diffs on leading and trailing white spaces
          30-Jan-2006	(boija02) Updated copyright info for Ingres Corp.

*/
? delete apxd.c 
<<
~
>>
? delete apxd.exe 
<<
~
>>
? delete apxd.obj 
<<
~
>>
? delete apxd.o 
<<
~
>>
? delete forms.olb 
<<
~
>>
? delete forms.a 
<<
~
>>
? delete masterfr 
<<
~
>>
? delete masterfr.obj 
<<
~
>>
? delete masterfr.o 
<<
~
>>
? delete studentf 
<<
~
>>
? delete studentf.obj 
<<
~
>>
? delete studentf.o 
<<
~
>>
? delobj SEPPARAMDB -form studentfrm masterfrm 
<<
~
>>
? fill student.dat 
!!
mmm_1	23	12-jan-1965	3.2	12345678	I am mmm_1	prof_math
mmm_2	24	12-jan-1966	3.3	12345679	I am mmm_2	prof_math
mmm_3	25	12-jan-1967	3.4	12345680	I am mmm_3	prof_math
mmm_4	26	12-jan-1968	3.5	12345681	I am mmm_4	prof_math
mmm_5	27	12-jan-1969	3.6	12345682	I am mmm_5	prof_math
mmm_6	28	12-jan-1960	3.7	12345683	I am mmm_6	prof_math
mmm_7	29	12-jan-1961	3.8	12345684	I am mmm_7	prof_math
lll_1	35	01-feb-1950	4.2	23456789	I am lll_1	prof_latin
lll_2	36	01-feb-1951	4.3	33456789	I am lll_2	prof_latin
lll_3	37	01-feb-1952	4.4	43456789	I am lll_3	prof_latin
lll_4	38	01-feb-1953	4.5	53456789	I am lll_4	prof_latin
lll_5	39	01-feb-1954	4.6	63456789	I am lll_5	prof_latin
ggg_1	18	15-aug-1970	5.0	98765432	I am ggg_1	prof_geog
ggg_2	19	15-aug-1971	4.9	98356782	I am ggg_2	prof_geog
ccc_1	50	10-mar-1935	3.8	33333333	I am ccc_1	prof_cs
ccc_2	52	11-mar-1935	3.9	22222222	I am ccc_2	prof_cs
ccc_3	54	12-mar-1935	4.0	11111111	I am ccc_3	prof_cs
ccc_4	56	13-mar-1935	4.1	44444444	I am ccc_4	prof_cs
ppp_1	45	03-apr-1945	5.0	45454545	I am ppp_1	prof_phil
!!
? fill professo.dat 
!!
prof_math	math
prof_latin	latin
prof_geog	geography
prof_cs	compsci
prof_phil	philosophy
prof_none1	No dept_1
prof_none2	No dept_2
!!
? fill apxd.qry 
!!
create student (sname = c25, sage = i1, sbdate = date, sgpa = f4,
	sidno = i4, scomment = text(30), sadvisor = c25)\p\g
copy student (sname=c0tab,sage=c0tab, sbdate=c0tab, sgpa=c0tab,
	sidno=c0tab, scomment=c0tab,sadvisor=c0nl) from
	"student.dat"\p\g
create professor(pname=c25,pdept=c10)\p\g
copy professor (pname=c0tab, pdept=c0nl) from
	"professo.dat"\p\g
!!
? quel SEPPARAMDB 
<<
~
>>
* destroy student, professor\g 
<<
~
>>
* \i apxd.qry 
<<
 create student (sname = c25, sage = i1, sbdate = date, sgpa = f4,
	sidno = i4, scomment = text(30), sadvisor = c25)
copy student (sname=c0tab,sage=c0tab, sbdate=c0tab, sgpa=c0tab,
	sidno=c0tab, scomment=c0tab,sadvisor=c0nl) from
	"student.dat"
(19 rows)
create professor(pname=c25,pdept=c10)
copy professor (pname=c0tab, pdept=c0nl) from
	"professo.dat"
(7 rows)
continue
* 
>>
* \q
<<
~
>>
? fill personne.for 
!!
COPYFORM:	6.0	18-mar-1988
FORM:	masterfrm		
	80	21	0	0	2	1	1	6	0	0	0	0	0	0	0	5
FIELD:
	0	pname	32	25	0	25	1	33	4	5	25	0	8	pname:	0	0	0	0	0	0	0		c25			0	0
	1	studenttbl	0	2	0	2	7	32	8	13	1	3	0		0	0	0	1	0	0	0					1	1
	0	sname	32	25	0	25	1	25	0	1	25	3	1	sname	1	1	0	0	0	0	0		c25			2	2
	1	sage	30	4	0	2	1	4	0	27	2	3	27	sage	27	1	0	0	0	0	0		-i2			2	3
	-1	pdept	32	10	0	10	1	18	4	44	10	0	8	pdept:	0	0	0	0	0	0	0		c10			0	4
TRIM:
	0	0	Masterfrm of PROFESSOR-STUDENT master-detail (master)	0	0	0	0
FORM:	studentfrm		
	2034	16	0	0	3	4	1	6	0	0	0	0	0	0	0	7
FIELD:
	0	sgpa	31	4	0	4	1	11	7	45	4	0	7	sgpa:	0	0	0	0	0	0	0		-f4.2			0	0
	1	scomment	37	2002	0	2000	1	2011	10	23	2000	0	11	scomment:	0	0	0	0	0	0	0		c2000			0-
	1
	2	sadvisor	32	20	0	20	1	31	13	5	20	0	11	sadvisor:	0	0	0	0	0	0	0		c20			0	2
	-1	sname	32	25	0	25	1	33	4	5	25	0	8	sname:	0	0	0	0	0	0	0		c25			0	3
	-1	sage	30	4	0	2	1	9	4	45	2	0	7	sage:	0	0	0	0	0	0	0		-i2			0	4
	-1	sbdate	32	25	0	25	1	34	7	5	25	0	9	sbdate:	0	0	0	0	0	0	0		c25			0	5
	-1	sidno	30	4	0	9	1	17	10	5	9	0	8	sidno:	0	0	0	0	0	0	0		-i9			0	6
TRIM:
	0	0	studentfrm of PROFESSOR-STUDENT master-detail application (detail)	0	0	0	0
!!
? copyform -i -r SEPPARAMDB personne.for 
<<
INGRES COPYFORM Copyright (c) 1984, 1991 Ingres Corporation
Copied form 'masterfrm' to database.
Copied form 'studentfrm' to database.
Encoding forms into database . . .
>>
<< IF (NT_GENERIC) 
INGRES COPYFORM Copyright (c) 1984, 1997 Ingres Corporation
>>
? compform SEPPARAMDB masterfrm masterfr 
<<
INGRES COMPFORM Copyright (c) 1986, 1991 Ingres Corporation
Writing compiled version of form "masterfrm" to file "masterfr" . . .
Compiled version of form "masterfrm" successfully written to file "masterfr".
>>
? sepcc masterfr 
<<
>>
<<
masterfr.c
>>
? compform SEPPARAMDB studentfrm studentf 
<<
INGRES COMPFORM Copyright (c) 1986, 1991 Ingres Corporation
Writing compiled version of form "studentfrm" to file "studentf" . . .
Compiled version of form "studentfrm" successfully written to file "studentf".
>>
? sepcc studentf 
<<
>>
<<
studentf.c
>>
? seplib forms studentf masterfr 
<<
~
>>
.if (VMS) 
? fill apxd.sc 
!!
EXEC SQL INCLUDE SQLCA;

EXEC SQL DECLARE student TABLE /* Graduate student table */
(sname       char(25),     /* Name */
 sage        integer1,     /* Age */
 sbdate      char(25),     /* Birth date */
 sgpa        float4,       /* Grade point average */
 sidno       integer,      /* Unique student number */
 scomment    varchar(200), /* General comments */
 sadvisor    char(25));    /* Advisor"s name */

EXEC SQL DECLARE professor TABLE /* Professor table */
(pname char(25),                 /* Professor's name */
 pdept char(10));                /* Department */

EXEC SQL BEGIN DECLARE SECTION;
   /* Global grad student record maps to database table */
   struct {
      char   sname[26];
      short  sage;
      char   sbdate[26];
      float  sgpa;
      int    sidno;
      char   scomment[201];
      char   sadvisor[26];
    } grad;
EXEC SQL END DECLARE SECTION;

/*
** Procedure: MAIN
** Purpose:   Start up program and call Master driver.
*/
int  main(argc,argv)
int  argc;
EXEC SQL BEGIN DECLARE SECTION;
char *argv[];
EXEC SQL END DECLARE SECTION;
{
   if (argc < 2)
   {
      printf("Usage: %s <database name>\n",argv[0]);
      exit(1);
   }

   /* Start up INGRES and the FORMS system */
   EXEC FRS FORMS;

   EXEC SQL WHENEVER SQLERROR STOP;
   EXEC FRS MESSAGE 'Initializing Student Administrator . . .';

   EXEC SQL CONNECT :argv[1]; 

   Master();

   EXEC FRS CLEAR SCREEN;
   EXEC FRS ENDFORMS;
   EXEC SQL DISCONNECT;
   exit(0);
}

/*
** Procedure: Master
** Purpose:   Drive the application, by running "masterfrm" and
**            allowing the user to "zoom" into a selected student.
** Parameters:
**            None - Uses the global student "grad" record.
*/

Master()
{
   EXEC SQL BEGIN DECLARE SECTION;
      /* Professor info maps to database table */
      struct {
        char pname[26];
        char pdept[11];
      } prof;

      /* Useful forms system information */
      int lastrow,      /* Lastrow in table field */
      istable;          /* Is a table field? */

      /* Local utility buffers */
      char msgbuf[100];          /* Message buffer */
      char respbuf[256];         /* Response buffer */
      char old_advisor[26];      /* Old advisor before ZOOM */

      /* Externally compiled master form */
      globalref int *masterfrm;  /* replace 'extern' with 'globalref' for VMS */
   EXEC SQL END DECLARE SECTION;

   EXEC FRS ADDFORM :masterfrm;

   /*
   ** Initialize "studenttbl" with a data set in READ mode. 
   ** Declare hidden columns for all the extra fields that 
   ** the program will display when more information is 
   ** requested about a student. Columns "sname" and "sage" 
   ** are displayed. All other columns are hidden, to be 
   ** used in the student information form. 
   */ 
   EXEC FRS INITTABLE masterfrm studenttbl READ 
      (sbdate   = char(25), 
       sgpa     = float4, 
       sidno    = integer4, 
       scomment = char(200), 
       sadvisor = char(20));

   EXEC FRS DISPLAY masterfrm UPDATE;

   EXEC FRS INITIALIZE; 
   EXEC FRS BEGIN; 
      EXEC FRS MESSAGE 'Enter an Advisor name . . .'; 
      EXEC FRS SLEEP 2;
   EXEC FRS END;

   EXEC FRS ACTIVATE MENUITEM 'Students', FIELD 'pname'; 
   EXEC FRS BEGIN;

      /* Load the students of the specified professor */ 
      EXEC FRS GETFORM (:prof.pname = pname);

      /* If no professor name is given, resume */ 
      if (prof.pname[0] == '\0') 
         EXEC FRS RESUME FIELD pname;

      /* 
      ** Verify that the professor exists. Local error 
      ** handling just prints the message and continues. 
      ** Assume that each professor has exactly one 
      ** department. 
      */ 
      EXEC SQL WHENEVER SQLERROR CALL SQLPRINT; 
      EXEC SQL WHENEVER NOT FOUND CONTINUE; 
      prof.pdept[0] = '\0'; 
      EXEC SQL SELECT pdept 
            INTO :prof.pdept 
            FROM professor 
            WHERE pname = :prof.pname;

      if (prof.pdept[0] == '\0') 
      { 
         sprintf(msgbuf,
	      "No professor with name \"%s\" [RETURN]", prof.pname);
         EXEC FRS PROMPT NOECHO (:msgbuf, :respbuf);
         EXEC FRS CLEAR FIELD ALL; 
         EXEC FRS RESUME FIELD PNAME; 
      }

      /* Fill the department field and load students */ 
      EXEC FRS PUTFORM (pdept = :prof.pdept); 
      EXEC FRS REDISPLAY; /* Refresh for query */

      Load_Students(prof.pname);

      EXEC FRS RESUME FIELD studenttbl;

   EXEC FRS END; /* "Students" */

   EXEC FRS ACTIVATE MENUITEM 'Zoom'; 
   EXEC FRS BEGIN;

      /* 
      ** Confirm that user is in "studenttbl" and that 
      ** the table field is not empty. Collect data from 
      ** the row and zoom for browsing and updating. 
      */ 
      EXEC FRS INQUIRE_FRS FIELD masterfrm
           (:istable = table);

      if (istable == 0) 
      { 
         EXEC FRS PROMPT NOECHO 
             ('Select from the student table [RETURN]', :respbuf); 
         EXEC FRS RESUME FIELD studenttbl; 
      }

      EXEC FRS INQUIRE_FRS TABLE masterfrm 
           (:lastrow = lastrow);

      if (lastrow == 0) 
      { 
         EXEC FRS PROMPT NOECHO 
                ('There are no students [RETURN]', :respbuf); 
         EXEC FRS RESUME FIELD pname; 
      }

      /* Collect all data on student into global record */ 
      EXEC FRS GETROW masterfrm studenttbl 
        (:grad.sname = sname, 
         :grad.sage = sage, 
         :grad.sbdate = sbdate,
         :grad.sgpa = sgpa, 
         :grad.sidno = sidno, 
         :grad.scomment = scomment, 
         :grad.sadvisor = sadvisor);

      /* 
      ** Display "studentfrm," and if any changes were made, 
      ** make the updates to the local table field row. 
      ** Only make updates to the columns corresponding to 
      ** writable fields in "studentfrm". If the student 
      ** changed advisors, then delete the row from the 
      ** display. 
      */ 
      strcpy(old_advisor, grad.sadvisor); 
      if (Student_Info_Changed()) 
      { 
         if (strcmp(old_advisor, grad.sadvisor) != 0) 
            EXEC FRS DELETEROW masterfrm studenttbl; 
         else 
            EXEC FRS PUTROW masterfrm studenttbl 
              (sgpa = :grad.sgpa, 
               scomment = :grad.scomment, 
               sadvisor = :grad.sadvisor);
      }

   EXEC FRS END; /* "Zoom" */

   EXEC FRS ACTIVATE MENUITEM 'Exit'; 
   EXEC FRS BEGIN; 
      EXEC FRS BREAKDISPLAY; 
   EXEC FRS END; /* "Exit" */

   EXEC FRS FINALIZE;

} /* Master */

/* 
** Procedure: Load_Students 
** Purpose:   Given an advisor name, load into the "studenttbl" 
**            table field all the students who report to the 
**            professor with that name. 
** Parameters: 
**            advisor - User-specified professor name. 
**                      Uses the global student record.
*/

Load_Students(adv) 
char *adv; 
{ 
   EXEC SQL BEGIN DECLARE SECTION; 
      char *advisor = adv; 
   EXEC SQL END DECLARE SECTION;

   EXEC SQL DECLARE studentcsr CURSOR FOR 
      SELECT sname, sage, sbdate, sgpa, sidno, scomment, sadvisor 
      FROM student 
      WHERE sadvisor = :advisor;

   /* 
   ** Clear previous contents of table field. Load the table 
   ** field from the database table based on the advisor name. 
   ** Columns "sname" and "sage" will be displayed, and all 
   ** others will be hidden. 
   */ 
   EXEC FRS MESSAGE 'Retrieving Student Information . . .';

   EXEC FRS CLEAR FIELD studenttbl;

   EXEC SQL WHENEVER SQLERROR CALL SQLPRINT; 
   EXEC SQL WHENEVER NOT FOUND GOTO Load_End;

   EXEC SQL OPEN studentcsr;

   /* 
   ** Before we start the loop, we know that the OPEN was 
   ** successful and that NOT FOUND was not set. 
   */
   while (sqlca.sqlcode == 0) 
   { 
      EXEC SQL FETCH studentcsr INTO :grad;

      EXEC FRS LOADTABLE masterfrm studenttbl 
         (sname = :grad.sname, 
          sage = :grad.sage, 
          sbdate = :grad.sbdate, 
          sgpa = :grad.sgpa, 
          sidno = :grad.sidno, 
          scomment = :grad.scomment, 
          sadvisor = :grad.sadvisor);
   }

Load_End: /* Clean up on an error, and close cursors */ 
   EXEC SQL WHENEVER NOT FOUND CONTINUE; 
   EXEC SQL WHENEVER SQLERROR CONTINUE; 
   EXEC SQL CLOSE studentcsr;

} /* Load_Students */

/* 
** Procedure: Student_Info_Changed 
** Purpose:   Allow the user to zoom in on the details of a selected 
**            student. Some of the data can be updated by the user. 
**            If any updates were made, then reflect these back into 
**            the database table. The procedure returns TRUE if any 
**            changes were made. 
** Parameters: 
**            None - Uses data in the global "grad" record. 
** Returns: 
**            TRUE/FALSE - Changes were made to the database. 
**                         Sets the global "grad" record with the new data.
*/

int 
Student_Info_Changed() 
{ 
   EXEC SQL BEGIN DECLARE SECTION; 
      int changed;             /* Changes made to data in form */ 
      int valid_advisor;       /* Valid advisor name? */ 
      globalref int *studentfrm;  /* Compiled form */
	     /* replace 'extern' with 'globalref' for VMS */

   EXEC SQL END DECLARE SECTION;

   /* Control ADDFORM to only initialize once */ 
   static int loadform = 0;

   if (!loadform) 
   { 
      EXEC FRS MESSAGE 'Loading Student form . . .'; 
      EXEC FRS ADDFORM :studentfrm; 
      loadform = 1;
   }

   /* Local error handler just prints error and continues */ 
   EXEC SQL WHENEVER SQLERROR CALL SQLPRINT; 
   EXEC SQL WHENEVER NOT FOUND CONTINUE;

   EXEC FRS DISPLAY studentfrm FILL; 
   EXEC FRS INITIALIZE 
      (sname = :grad.sname, 
       sage = :grad.sage, 
       sbdate = :grad.sbdate, 
       sgpa = :grad.sgpa, 
       sidno = :grad.sidno, 
       scomment = :grad.scomment, 
       sadvisor = :grad.sadvisor);

   EXEC FRS ACTIVATE MENUITEM 'Write'; 
   EXEC FRS BEGIN;

      /* 
      ** If changes were made, then update the database 
      ** table. Only bother with the fields that are not 
      ** read-only. 
      */ 
      EXEC FRS INQUIRE_FRS FORM (:changed = change);

      if (changed == 1) 
      { 
         EXEC FRS validate; 
         EXEC FRS message 'Writing changes to database. . .';

         EXEC FRS getform 
            (:grad.sgpa = sgpa, 
             :grad.scomment = scomment, 
             :grad.sadvisor = sadvisor);

         /* Enforce integrity of professor name */ 
         valid_advisor = 0; 
         EXEC SQL SELECT 1 INTO :valid_advisor 
            FROM professor 
            WHERE pname = :grad.sadvisor;

         if (valid_advisor == 0) 
         { 
            EXEC FRS MESSAGE 'Not a valid advisor name'; 
            EXEC FRS SLEEP 2; 
            EXEC FRS RESUME FIELD sadvisor; 
         }
         else 
         { 
            EXEC SQL UPDATE student SET 
               sgpa = :grad.sgpa, 
               scomment = :grad.scomment, 
               sadvisor = :grad.sadvisor 
              where sidno = :grad.sidno; 
            EXEC FRS BREAKDISPLAY; 
         } 
      } 
   EXEC FRS END; /* "Write" */

   EXEC FRS ACTIVATE MENUITEM 'Quit'; 
   EXEC FRS BEGIN; 
      /* Quit without submitting changes */ 
      changed = 0; 
      EXEC FRS BREAKDISPLAY; 
   EXEC FRS END; /* "Quit" */

   EXEC FRS FINALIZE;

   return (changed == 1);

} /* Student_Info_Changed */ 

!!
.else 
? fill apxd.sc 
!!
EXEC SQL INCLUDE SQLCA;

EXEC SQL DECLARE student TABLE /* Graduate student table */
(sname       char(25),     /* Name */
 sage        integer1,     /* Age */
 sbdate      char(25),     /* Birth date */
 sgpa        float4,       /* Grade point average */
 sidno       integer,      /* Unique student number */
 scomment    varchar(200), /* General comments */
 sadvisor    char(25));    /* Advisor"s name */

EXEC SQL DECLARE professor TABLE /* Professor table */
(pname char(25),                 /* Professor's name */
 pdept char(10));                /* Department */

EXEC SQL BEGIN DECLARE SECTION;
   /* Global grad student record maps to database table */
   struct {
      char   sname[26];
      short  sage;
      char   sbdate[26];
      float  sgpa;
      int    sidno;
      char   scomment[201];
      char   sadvisor[26];
    } grad;
EXEC SQL END DECLARE SECTION;

/*
** Procedure: MAIN
** Purpose:   Start up program and call Master driver.
*/
int  main(argc,argv)
int  argc;
EXEC SQL BEGIN DECLARE SECTION;
char *argv[];
EXEC SQL END DECLARE SECTION;
{
   if (argc < 2)
   {
      printf("Usage: %s <database name>\n",argv[0]);
      exit(1);
   }

   /* Start up INGRES and the FORMS system */
   EXEC FRS FORMS;

   EXEC SQL WHENEVER SQLERROR STOP;
   EXEC FRS MESSAGE 'Initializing Student Administrator . . .';

   EXEC SQL CONNECT :argv[1]; 

   Master();

   EXEC FRS CLEAR SCREEN;
   EXEC FRS ENDFORMS;
   EXEC SQL DISCONNECT;
   exit(0);
}

/*
** Procedure: Master
** Purpose:   Drive the application, by running "masterfrm" and
**            allowing the user to "zoom" into a selected student.
** Parameters:
**            None - Uses the global student "grad" record.
*/

Master()
{
   EXEC SQL BEGIN DECLARE SECTION;
      /* Professor info maps to database table */
      struct {
        char pname[26];
        char pdept[11];
      } prof;

      /* Useful forms system information */
      int lastrow,      /* Lastrow in table field */
      istable;          /* Is a table field? */

      /* Local utility buffers */
      char msgbuf[100];          /* Message buffer */
      char respbuf[256];         /* Response buffer */
      char old_advisor[26];      /* Old advisor before ZOOM */

      /* Externally compiled master form */
      extern int *masterfrm;  /* replace 'extern' with 'globalref' for VMS */
   EXEC SQL END DECLARE SECTION;

   EXEC FRS ADDFORM :masterfrm;

   /*
   ** Initialize "studenttbl" with a data set in READ mode. 
   ** Declare hidden columns for all the extra fields that 
   ** the program will display when more information is 
   ** requested about a student. Columns "sname" and "sage" 
   ** are displayed. All other columns are hidden, to be 
   ** used in the student information form. 
   */ 
   EXEC FRS INITTABLE masterfrm studenttbl READ 
      (sbdate   = char(25), 
       sgpa     = float4, 
       sidno    = integer4, 
       scomment = char(200), 
       sadvisor = char(20));

   EXEC FRS DISPLAY masterfrm UPDATE;

   EXEC FRS INITIALIZE; 
   EXEC FRS BEGIN; 
      EXEC FRS MESSAGE 'Enter an Advisor name . . .'; 
      EXEC FRS SLEEP 2;
   EXEC FRS END;

   EXEC FRS ACTIVATE MENUITEM 'Students', FIELD 'pname'; 
   EXEC FRS BEGIN;

      /* Load the students of the specified professor */ 
      EXEC FRS GETFORM (:prof.pname = pname);

      /* If no professor name is given, resume */ 
      if (prof.pname[0] == '\0') 
         EXEC FRS RESUME FIELD pname;

      /* 
      ** Verify that the professor exists. Local error 
      ** handling just prints the message and continues. 
      ** Assume that each professor has exactly one 
      ** department. 
      */ 
      EXEC SQL WHENEVER SQLERROR CALL SQLPRINT; 
      EXEC SQL WHENEVER NOT FOUND CONTINUE; 
      prof.pdept[0] = '\0'; 
      EXEC SQL SELECT pdept 
            INTO :prof.pdept 
            FROM professor 
            WHERE pname = :prof.pname;

      if (prof.pdept[0] == '\0') 
      { 
         sprintf(msgbuf,
	      "No professor with name \"%s\" [RETURN]", prof.pname);
         EXEC FRS PROMPT NOECHO (:msgbuf, :respbuf);
         EXEC FRS CLEAR FIELD ALL; 
         EXEC FRS RESUME FIELD PNAME; 
      }

      /* Fill the department field and load students */ 
      EXEC FRS PUTFORM (pdept = :prof.pdept); 
      EXEC FRS REDISPLAY; /* Refresh for query */

      Load_Students(prof.pname);

      EXEC FRS RESUME FIELD studenttbl;

   EXEC FRS END; /* "Students" */

   EXEC FRS ACTIVATE MENUITEM 'Zoom'; 
   EXEC FRS BEGIN;

      /* 
      ** Confirm that user is in "studenttbl" and that 
      ** the table field is not empty. Collect data from 
      ** the row and zoom for browsing and updating. 
      */ 
      EXEC FRS INQUIRE_FRS FIELD masterfrm
           (:istable = table);

      if (istable == 0) 
      { 
         EXEC FRS PROMPT NOECHO 
             ('Select from the student table [RETURN]', :respbuf); 
         EXEC FRS RESUME FIELD studenttbl; 
      }

      EXEC FRS INQUIRE_FRS TABLE masterfrm 
           (:lastrow = lastrow);

      if (lastrow == 0) 
      { 
         EXEC FRS PROMPT NOECHO 
                ('There are no students [RETURN]', :respbuf); 
         EXEC FRS RESUME FIELD pname; 
      }

      /* Collect all data on student into global record */ 
      EXEC FRS GETROW masterfrm studenttbl 
        (:grad.sname = sname, 
         :grad.sage = sage, 
         :grad.sbdate = sbdate,
         :grad.sgpa = sgpa, 
         :grad.sidno = sidno, 
         :grad.scomment = scomment, 
         :grad.sadvisor = sadvisor);

      /* 
      ** Display "studentfrm," and if any changes were made, 
      ** make the updates to the local table field row. 
      ** Only make updates to the columns corresponding to 
      ** writable fields in "studentfrm". If the student 
      ** changed advisors, then delete the row from the 
      ** display. 
      */ 
      strcpy(old_advisor, grad.sadvisor); 
      if (Student_Info_Changed()) 
      { 
         if (strcmp(old_advisor, grad.sadvisor) != 0) 
            EXEC FRS DELETEROW masterfrm studenttbl; 
         else 
            EXEC FRS PUTROW masterfrm studenttbl 
              (sgpa = :grad.sgpa, 
               scomment = :grad.scomment, 
               sadvisor = :grad.sadvisor);
      }

   EXEC FRS END; /* "Zoom" */

   EXEC FRS ACTIVATE MENUITEM 'Exit'; 
   EXEC FRS BEGIN; 
      EXEC FRS BREAKDISPLAY; 
   EXEC FRS END; /* "Exit" */

   EXEC FRS FINALIZE;

} /* Master */

/* 
** Procedure: Load_Students 
** Purpose:   Given an advisor name, load into the "studenttbl" 
**            table field all the students who report to the 
**            professor with that name. 
** Parameters: 
**            advisor - User-specified professor name. 
**                      Uses the global student record.
*/

Load_Students(adv) 
char *adv; 
{ 
   EXEC SQL BEGIN DECLARE SECTION; 
      char *advisor = adv; 
   EXEC SQL END DECLARE SECTION;

   EXEC SQL DECLARE studentcsr CURSOR FOR 
      SELECT sname, sage, sbdate, sgpa, sidno, scomment, sadvisor 
      FROM student 
      WHERE sadvisor = :advisor;

   /* 
   ** Clear previous contents of table field. Load the table 
   ** field from the database table based on the advisor name. 
   ** Columns "sname" and "sage" will be displayed, and all 
   ** others will be hidden. 
   */ 
   EXEC FRS MESSAGE 'Retrieving Student Information . . .';

   EXEC FRS CLEAR FIELD studenttbl;

   EXEC SQL WHENEVER SQLERROR CALL SQLPRINT; 
   EXEC SQL WHENEVER NOT FOUND GOTO Load_End;

   EXEC SQL OPEN studentcsr;

   /* 
   ** Before we start the loop, we know that the OPEN was 
   ** successful and that NOT FOUND was not set. 
   */
   while (sqlca.sqlcode == 0) 
   { 
      EXEC SQL FETCH studentcsr INTO :grad;

      EXEC FRS LOADTABLE masterfrm studenttbl 
         (sname = :grad.sname, 
          sage = :grad.sage, 
          sbdate = :grad.sbdate, 
          sgpa = :grad.sgpa, 
          sidno = :grad.sidno, 
          scomment = :grad.scomment, 
          sadvisor = :grad.sadvisor);
   }

Load_End: /* Clean up on an error, and close cursors */ 
   EXEC SQL WHENEVER NOT FOUND CONTINUE; 
   EXEC SQL WHENEVER SQLERROR CONTINUE; 
   EXEC SQL CLOSE studentcsr;

} /* Load_Students */

/* 
** Procedure: Student_Info_Changed 
** Purpose:   Allow the user to zoom in on the details of a selected 
**            student. Some of the data can be updated by the user. 
**            If any updates were made, then reflect these back into 
**            the database table. The procedure returns TRUE if any 
**            changes were made. 
** Parameters: 
**            None - Uses data in the global "grad" record. 
** Returns: 
**            TRUE/FALSE - Changes were made to the database. 
**                         Sets the global "grad" record with the new data.
*/

int 
Student_Info_Changed() 
{ 
   EXEC SQL BEGIN DECLARE SECTION; 
      int changed;             /* Changes made to data in form */ 
      int valid_advisor;       /* Valid advisor name? */ 
      extern int *studentfrm;  /* Compiled form */
	     /* replace 'extern' with 'globalref' for VMS */

   EXEC SQL END DECLARE SECTION;

   /* Control ADDFORM to only initialize once */ 
   static int loadform = 0;

   if (!loadform) 
   { 
      EXEC FRS MESSAGE 'Loading Student form . . .'; 
      EXEC FRS ADDFORM :studentfrm; 
      loadform = 1;
   }

   /* Local error handler just prints error and continues */ 
   EXEC SQL WHENEVER SQLERROR CALL SQLPRINT; 
   EXEC SQL WHENEVER NOT FOUND CONTINUE;

   EXEC FRS DISPLAY studentfrm FILL; 
   EXEC FRS INITIALIZE 
      (sname = :grad.sname, 
       sage = :grad.sage, 
       sbdate = :grad.sbdate, 
       sgpa = :grad.sgpa, 
       sidno = :grad.sidno, 
       scomment = :grad.scomment, 
       sadvisor = :grad.sadvisor);

   EXEC FRS ACTIVATE MENUITEM 'Write'; 
   EXEC FRS BEGIN;

      /* 
      ** If changes were made, then update the database 
      ** table. Only bother with the fields that are not 
      ** read-only. 
      */ 
      EXEC FRS INQUIRE_FRS FORM (:changed = change);

      if (changed == 1) 
      { 
         EXEC FRS validate; 
         EXEC FRS message 'Writing changes to database. . .';

         EXEC FRS getform 
            (:grad.sgpa = sgpa, 
             :grad.scomment = scomment, 
             :grad.sadvisor = sadvisor);

         /* Enforce integrity of professor name */ 
         valid_advisor = 0; 
         EXEC SQL SELECT 1 INTO :valid_advisor 
            FROM professor 
            WHERE pname = :grad.sadvisor;

         if (valid_advisor == 0) 
         { 
            EXEC FRS MESSAGE 'Not a valid advisor name'; 
            EXEC FRS SLEEP 2; 
            EXEC FRS RESUME FIELD sadvisor; 
         }
         else 
         { 
            EXEC SQL UPDATE student SET 
               sgpa = :grad.sgpa, 
               scomment = :grad.scomment, 
               sadvisor = :grad.sadvisor 
              where sidno = :grad.sidno; 
            EXEC FRS BREAKDISPLAY; 
         } 
      } 
   EXEC FRS END; /* "Write" */

   EXEC FRS ACTIVATE MENUITEM 'Quit'; 
   EXEC FRS BEGIN; 
      /* Quit without submitting changes */ 
      changed = 0; 
      EXEC FRS BREAKDISPLAY; 
   EXEC FRS END; /* "Quit" */

   EXEC FRS FINALIZE;

   return (changed == 1);

} /* Student_Info_Changed */ 

!!
.endif 
? esqlc apxd.sc 
<<
>>
<<
ESQL apxd.sc:
>>
? sepcc apxd 
<<
>>
<<
apxd.c
>>
? seplnk apxd forms 
<<
>>
? ferun apxd.exe SEPPARAMDB 
<<
~
>>
^^ prof_math`CR'`ESC'
<<

%% CHANGED FIELD pname:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math_                      pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% FORM REDISPLAYED
##
__________________________________________________________________________________
|_Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
				|                                                                               -
 |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% Retrieving Student Information . . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% CHANGED FIELD pname:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math_                      pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% FORM REDISPLAYED
##
__________________________________________________________________________________
|_Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% Retrieving Student Information . . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ zoom`CR'5.55;owena;efoa;woeja;ffaworifj;aeofa;wsoefma;wefji;aowiefn;aoeifja;woeif-
j;aowijfga;orga;orawe;foawejmf;oi`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% Loading Student form . . .
%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  _3.20                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  I am mmm_1                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD sgpa:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  5.5_5                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  I am mmm_1                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected

%% CHANGED FIELD scomment:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|i;aowiefn;aoeifja;woeifj;aowijfga;orga;orawe;foawejmf;oi                        |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% Loading Student form . . .
%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  _3.20                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  I am mmm_1                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD sgpa:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  5.5_5                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  I am mmm_1                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected

%% CHANGED FIELD scomment:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|i;aowiefn;aoeifja;woeifj;aowijfga;orga;orawe;foawejmf;oi                        |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@
>>
^^ write`CR'`^J'`ESC'
<<
~
>>
^^ zoom`CR'5.25`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  _3.30                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD sgpa:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  5.2_5                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD scomment:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  5.25                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  _I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  _3.30                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD sgpa:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  5.2_5                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD scomment:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  5.25                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  _I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ quit`CR'`^J'`ESC'
<<

%% MENU RESPONSE: Quit
%% MENU:   Write  Quit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Quit"

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_3                    |25  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Quit
%% MENU:   Write  Quit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Quit"

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_3                    |25  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ zoom`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_3                           sage:  25                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1967                    sgpa:  _3.40                        |
|                                                                                |
|                                                                                |
|     sidno:  12345680  scomment:  I am mmm_3                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_3                           sage:  25                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1967                    sgpa:  _3.40                        |
|                                                                                |
|                                                                                |
|     sidno:  12345680  scomment:  I am mmm_3                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ write`CR'`ESC'
<<
~
>>
^^ quit`CR'`ESC'
<<
~
>>
^^ students`CR'`ESC'
<<

%% MENU RESPONSE: Students
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `0' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `0' is "Students"

%% FORM REDISPLAYED
##
__________________________________________________________________________________
|_Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_3                    |25  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit  : students                                              |
__________________________________________________________________________________
@@

%% Retrieving Student Information . . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Students
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `0' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `0' is "Students"

%% FORM REDISPLAYED
##
__________________________________________________________________________________
|_Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_3                    |25  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit  : students                                              |
__________________________________________________________________________________
@@

%% Retrieving Student Information . . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ zoom`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  _5.55                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  ;owena;efoa;woeja;ffaworifj;ae                |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  _5.55                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  ;owena;efoa;woeja;ffaworifj;ae                |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ quit`CR'`^J'`ESC'
<<
~
>>
^^ zoom`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  _3.30                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  _3.30                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ quit`CR'`^J'`ESC'
<<
~
>>
^^ zoom`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_3                           sage:  25                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1967                    sgpa:  _3.40                        |
|                                                                                |
|                                                                                |
|     sidno:  12345680  scomment:  I am mmm_3                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_3                           sage:  25                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1967                    sgpa:  _3.40                        |
|                                                                                |
|                                                                                |
|     sidno:  12345680  scomment:  I am mmm_3                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ quit`CR'`ESC'
<<
~
>>
^^ exit`CR'
<<
~
>>
? ferun apxd.exe SEPPARAMDB 
<<
~
>>
^^ prof_english`CR'`CR'`ESC'
<<

%% CHANGED FIELD pname:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_english_                   pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% PROMPT: No professor with name "prof_english" [RETURN] 

%% PROMPT RESPONSE: 

%%  
%% INSERT loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  _                               pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% CHANGED FIELD pname:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_english_                   pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% PROMPT: No professor with name "prof_english" [RETURN] 

%% PROMPT RESPONSE: 

%%  
%% INSERT loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  _                               pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ exit`CR'
<<
~
>>
? delete apxd.c 
<<
~
>>
? delete apxd.exe 
<<
~
>>
? delete apxd.obj 
<<
~
>>
? delete apxd.o 
<<
~
>>
? delete forms.olb 
<<
~
>>
? delete forms.a 
<<
~
>>
? delete masterfr 
<<
~
>>
? delete masterfr.obj 
<<
~
>>
? delete masterfr.o 
<<
~
>>
? delete studentf 
<<
~
>>
? delete studentf.obj 
<<
~
>>
? delete studentf.o 
<<
~
>>


Ending at: Tue Apr 07 11:15:48 1998
