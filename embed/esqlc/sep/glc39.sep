/*
  Copyright (c) 2008 Ingres Corporation

  Test Name     : glc39.sep
  Suite         : embed!esqlc
  Focus         : Ingres Regression Test
                : Test for bug 120359 - The ESQLC parser reports "E_EQ0244
                : Syntax error" for queries that contain references to columns
                : named 'interval'.
                :
                :
                :
  Databases     : SEPPARAMDB
  Tables        : b120359_*
  Filled Files  : 
  Copied Files  :
  Output Files  :
  Prerequisites : None
  Run as user   : testenv 
  Summary       : Verifies fix for bug 120359
                :
                :
  Exp. DIFFs    : None
                :
  History       : 8-Sep-2008 (wanfr01) Created.
                : 8-Sep-2008 (sarjo01) Formalized for piccolo.
                : 03-Nov-2008 (wanfr01) Cleaned up compiler warnings
*/
? sql -s SEPPARAMDB
<< 

>> 
* drop table b120359_1t\g
<<
~
>>
* create table b120359_1t (interval date) \g
<<
>>
* \q
<<
>>
? fill b120359.sc
!!
#include <stdio.h>
#include <stdlib.h>

EXEC SQL include sqlca;   

EXEC SQL begin declare section;
     char dbname[100];
     char   stmtbuff[257];
EXEC SQL end declare section;

int main(int argc, char *argv[])
{
	sprintf ( dbname, argv[1]);
   EXEC SQL connect :dbname;

   EXEC SQL update b120336_1t set interval = date('now') where interval != '';

/* 
** This line below compiles, the one above fails. ESQLC parser does not
** deal with interval as b120336_1t column name.
   EXEC SQL update b120336_1t set interval = date('now') where col1 != '';
*/

   /* test interval function while we are here */
   EXEC SQL update b120336_1t set fcol = interval('days', '5 years');

   EXEC SQL commit;
   EXEC SQL disconnect;

   exit(0);
}
!!
? esqlc b120359.sc
<<
ESQL b120359.sc:
>>
<<
>>
? sepcc b120359.c
<<
>>
<<
b120359.c
>>
? seplnk b120359
<<
>>
? run b120359.exe SEPPARAMDB
<<
>>
? delete b120359.c
<<
~
>>
? delete b120359.o
<<
~
>>
? delete b120359.obj
<<
~
>>
? delete b120359.exe
<<
~
>>
