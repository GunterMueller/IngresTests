/*
	Test Name: pza03qc.sep
	Time: 29-AUG-1991 10:20:14
	User Name: testenv
	Terminal type: septerm
 
	Test ID : pza03qc
	Module  : 3gl
	Filename: pza03qc.sep
	Purpose	: To test forms stmts add/put/getform, get/put/deleterow 
	Input Files  :
	Output Files :	student.dat, professo.dat, apxe.qry, personnd.for,
			apxe.qc
	Database     :	SEPPARAMDB (personnel)
	Tables       :	professor, student
	Synopsis     :	This application uses two ingres forms to test the
                        update and fill modes and the following forms
                        statements:  addform, putform, getform, getrow, putrow,
                        deleterow.

	History: 29-AUG-1991	Created	Author: saundra
		 01-JUL-1992  	Modified (jpark)
			Modified filenames to conform to DOS specs of
			8 character filenames and 3 character extensions.
			Also, replaced hard-code database names to 
			SEPPARAMDB.
		 18-AUG-1992	Modified (bobs)
			Changed some fill file names to prevent file name
			conflicts when running on MS-DOS.  Changed type of
			"sidno" from int to long so test would run on MS-DOS.
                 18-FEB-1993    Modified (bobs)
		        Added "int" return type to main (apxa.qc) and added
                        "exit(0)" to end of main for compatibility with
                        Tools for Windows.
		22-FEB-1993	Modified (jpark)
			Combined VMS and UNIX tests with .if.else command.
		NOTE:   SEPPARAM_SYSTEM must be set to the value returned
			by a "uname" command.  (In VMS, the value is set
			to "VMS")
		25-OCT-1993	Modified (alices)
			Added delete statements at the end of the test.
			Replaced .if SEPPARAM_SYSTEM = "VMS" with .if (VMS)
			Replaced SEPPARAMPERSONNE with SEPPARAMDB.
          13-Feb-1995	(qiuji01) changed copyright to computer associates.
                                  changed deleter to delobj.
          31-Mar-1997	(chiel02) Modified for Windows NT and added an alternate
                                  canon each for the sepcc commands.
	  07-Apr-1998	(uptad01) Added alternate canon for COPYFORM as it
                         Diffs on leading and trailing white spaces
          30-Jan-2006	(boija02) Updated copyright info for Ingres Corp.

*/
? delete apxe.c 
<<
~
>>
? delete apxe.exe 
<<
~
>>
? delete apxe.obj 
<<
~
>>
? delete apxe.o 
<<
~
>>
? delete forms.olb 
<<
~
>>
? delete forms.a 
<<
~
>>
? delete masterfr 
<<
~
>>
? delete masterfr.obj 
<<
~
>>
? delete masterfr.o 
<<
~
>>
? delete studentf 
<<
~
>>
? delete studentf.obj 
<<
~
>>
? delete studentf.o 
<<
~
>>
? delobj SEPPARAMDB -form studentfrm masterfrm 
<<
~
>>
? fill student.dat 
!!
mmm_1	23	12-jan-1965	3.2	12345678	I am mmm_1	prof_math
mmm_2	24	12-jan-1966	3.3	12345679	I am mmm_2	prof_math
mmm_3	25	12-jan-1967	3.4	12345680	I am mmm_3	prof_math
mmm_4	26	12-jan-1968	3.5	12345681	I am mmm_4	prof_math
mmm_5	27	12-jan-1969	3.6	12345682	I am mmm_5	prof_math
mmm_6	28	12-jan-1960	3.7	12345683	I am mmm_6	prof_math
mmm_7	29	12-jan-1961	3.8	12345684	I am mmm_7	prof_math
lll_1	35	01-feb-1950	4.2	23456789	I am lll_1	prof_latin
lll_2	36	01-feb-1951	4.3	33456789	I am lll_2	prof_latin
lll_3	37	01-feb-1952	4.4	43456789	I am lll_3	prof_latin
lll_4	38	01-feb-1953	4.5	53456789	I am lll_4	prof_latin
lll_5	39	01-feb-1954	4.6	63456789	I am lll_5	prof_latin
ggg_1	18	15-aug-1970	5.0	98765432	I am ggg_1	prof_geog
ggg_2	19	15-aug-1971	4.9	98356782	I am ggg_2	prof_geog
ccc_1	50	10-mar-1935	3.8	33333333	I am ccc_1	prof_cs
ccc_2	52	11-mar-1935	3.9	22222222	I am ccc_2	prof_cs
ccc_3	54	12-mar-1935	4.0	11111111	I am ccc_3	prof_cs
ccc_4	56	13-mar-1935	4.1	44444444	I am ccc_4	prof_cs
ppp_1	45	03-apr-1945	5.0	45454545	I am ppp_1	prof_phil
!!
? fill professo.dat 
!!
prof_math	math
prof_latin	latin
prof_geog	geography
prof_cs	compsci
prof_phil	philosophy
prof_none1	No dept_1
prof_none2	No dept_2
!!
? fill apxe.qry 
!!
create student (sname = c25, sage = i1, sbdate = date, sgpa = f4,
	sidno = i4, scomment = text(30), sadvisor = c25)\p\g
copy student (sname=c0tab,sage=c0tab, sbdate=c0tab, sgpa=c0tab,
	sidno=c0tab, scomment=c0tab,sadvisor=c0nl) from
	"student.dat"\p\g
create professor(pname=c25,pdept=c10)\p\g
copy professor (pname=c0tab, pdept=c0nl) from
	"professo.dat"\p\g
!!
? quel -s SEPPARAMDB 
<<
~
>>
* destroy student, professor\g
<<
~
>>
* \i apxe.qry 
<<
 create student (sname = c25, sage = i1, sbdate = date, sgpa = f4,
	sidno = i4, scomment = text(30), sadvisor = c25)
copy student (sname=c0tab,sage=c0tab, sbdate=c0tab, sgpa=c0tab,
	sidno=c0tab, scomment=c0tab,sadvisor=c0nl) from
	"student.dat"
(19 rows)
create professor(pname=c25,pdept=c10)
copy professor (pname=c0tab, pdept=c0nl) from
	"professo.dat"
(7 rows)
>>
* \q 
<<
~
>>
? fill personnd.for 
!!
COPYFORM:	6.0	18-mar-1988
FORM:	masterfrm		
	80	21	0	0	2	1	1	6	0	0	0	0	0	0	0	5
FIELD:
	0	pname	32	25	0	25	1	33	4	5	25	0	8	pname:	0	0	0	0	0	0	0		c25			0	0
	1	studenttbl	0	2	0	2	7	32	8	13	1	3	0		0	0	0	1	0	0	0					1	1
	0	sname	32	25	0	25	1	25	0	1	25	3	1	sname	1	1	0	0	0	0	0		c25			2	2
	1	sage	30	4	0	2	1	4	0	27	2	3	27	sage	27	1	0	0	0	0	0		-i2			2	3
	-1	pdept	32	10	0	10	1	18	4	44	10	0	8	pdept:	0	0	0	0	0	0	0		c10			0	4
TRIM:
	0	0	Masterfrm of PROFESSOR-STUDENT master-detail (master)	0	0	0	0
FORM:	studentfrm		
	2034	16	0	0	3	4	1	6	0	0	0	0	0	0	0	7
FIELD:
	0	sgpa	31	4	0	4	1	11	7	45	4	0	7	sgpa:	0	0	0	0	0	0	0		-f4.2			0	0
	1	scomment	37	2002	0	2000	1	2011	10	23	2000	0	11	scomment:	0	0	0	0	0	0	0		c2000			0-
	1
	2	sadvisor	32	20	0	20	1	31	13	5	20	0	11	sadvisor:	0	0	0	0	0	0	0		c20			0	2
	-1	sname	32	25	0	25	1	33	4	5	25	0	8	sname:	0	0	0	0	0	0	0		c25			0	3
	-1	sage	30	4	0	2	1	9	4	45	2	0	7	sage:	0	0	0	0	0	0	0		-i2			0	4
	-1	sbdate	32	25	0	25	1	34	7	5	25	0	9	sbdate:	0	0	0	0	0	0	0		c25			0	5
	-1	sidno	30	4	0	9	1	17	10	5	9	0	8	sidno:	0	0	0	0	0	0	0		-i9			0	6
TRIM:
	0	0	studentfrm of PROFESSOR-STUDENT master-detail application (detail)	0	0	0	0
!!
? copyform -i -r SEPPARAMDB personnd.for 
<<
INGRES COPYFORM Copyright (c) 1984, 1991 Ingres Corporation
Copied form 'masterfrm' to database.
Copied form 'studentfrm' to database.
Encoding forms into database . . .
>>
<< IF (NT_GENERIC) 
INGRES COPYFORM Copyright (c) 1984, 1997 Ingres Corporation
>>
? compform SEPPARAMDB masterfrm masterfr 
<<
INGRES COMPFORM Copyright (c) 1986, 1991 Ingres Corporation
Writing compiled version of form "masterfrm" to file "masterfr" . . .
Compiled version of form "masterfrm" successfully written to file "masterfr".
>>
? sepcc masterfr 
<<
>>
<<
masterfr.c
>>
? compform SEPPARAMDB studentfrm studentf 
<<
INGRES COMPFORM Copyright (c) 1986, 1991 Ingres Corporation
Writing compiled version of form "studentfrm" to file "studentf" . . .
Compiled version of form "studentfrm" successfully written to file "studentf".
>>
? sepcc studentf 
<<
>>
<<
studentf.c
>>
? seplib forms studentf masterfr 
<<
~
>>
.if (VMS) 
? fill apxe.qc 
!!
/* 
** GLOBAL declaration
** grad student record maps to database table
*/
##	struct {
##	    char   sname[26];
##	    short  sage;
##	    char   sbdate[26];
##	    float  sgpa;
##	    int    sidno;
##	    char   scomment[201];
##	    char   sadvisor[26];
##	} grad;

/*
** Procedure: MAIN
** Purpose:   Start up program and call Master driver.
*/

int main(argc,argv)

int argc;

##      char*   argv[];

{
        if (argc < 2)
                {
                printf("Usage: %s <database name>\n",argv[0]);
                exit(1);
                }

	/* Start up INGRES and the FORMS system */
##	FORMS

##	MESSAGE "Initializing Student Administrator . . ."

##	INGRES argv[1]
##	RANGE of p IS professor, s IS student

	Master();

##	CLEAR SCREEN
##	ENDFORMS
##	EXIT
	exit(0);
}


/*
** Procedure: Master
** Purpose:   Drive the application, by running "masterfrm", and
**            allowing the user to "zoom" into a selected student.
** Parameters:
**            None - Uses the global student "grad" record.
*/

Master()
##{
	/* Professor info maps to database table */
##	struct {
##		char  pname[26];
##		char  pdept[11];
##	} prof;

	/* Useful forms system information */
##	int  lastrow;	/* Lastrow in table field */
##	int  istable;	/* Is a table field? */

	/* Local utility buffers */
##	char  msgbuf[100];      /* Message buffer */
##	char  respbuf[256];     /* Response buffer */
##	char  old_advisor[26];  /* Old advisor before ZOOM */

	/* Externally compiled master form */
##	globalref int *masterfrm;

##	ADDFORM masterfrm

	/*
	** Initialize "studenttbl" with a data set in READ mode.
	** Declare hidden columns for all the extra fields that
	** the program will display when more information is
	** requested about a student.  Columns "sname" and "sage"
	** are displayed, all other columns are hidden, to be
	** used in the student information form.
	*/
##	INITTABLE #masterfrm studenttbl READ
##	    (sbdate = c25,
##	     sgpa = float4,
##	     sidno = integer4,
##	     scomment = c200,
##	     sadvisor = c20)

##	DISPLAY #masterfrm UPDATE

##	INITIALIZE
##	{
##	    MESSAGE "Enter an Advisor name . . ."
##	    SLEEP 2
##	}

##	ACTIVATE MENUITEM "Students", FIELD "pname" 
##	{
	    /* Load the students of the specified professor */
##	    GETFORM (prof.pname = pname)

	    /* If no professor name is given then resume */
	    if (prof.pname[0] == '\0')
##	    RESUME FIELD pname

	    /*
	    ** Verify that the professor exists.  Local error
	    ** handling just prints the message, and continues.
	    ** We assume that each professor has exactly one
	    ** department.
	    */
##	    
	    prof.pdept[0] = '\0';
##	    RETRIEVE (prof.pdept = p.pdept)
##		WHERE p.pname = prof.pname

	    if (prof.pdept[0] == '\0')
	    {
		sprintf(msgbuf,
		    "No professor with name \"%s\" [RETURN]", prof.pname);
##		PROMPT NOECHO (msgbuf, respbuf)
##		CLEAR FIELD ALL
##		RESUME FIELD pname
	    }

	    /* Fill the department field and load students */
##	    PUTFORM (pdept = prof.pdept)
##	    REDISPLAY       	/* Refresh for query */

	    Load_Students(prof.pname);

##	    RESUME FIELD studenttbl

##	}          		/* "Students" */

##	ACTIVATE MENUITEM "Zoom"
##	{

	    /*
	    ** Confirm that user is on "studenttbl", and that
	    ** the table field is not empty.  Collect data from
	    ** the row and zoom for browsing and updating.
	    */
##	    INQUIRE_FRS field #masterfrm (istable = table)

	    if (istable == 0)
	    {
##		PROMPT NOECHO
##		    ("Select from the student table [RETURN]", respbuf)
##		RESUME FIELD studenttbl
	    }

##	    INQUIRE_FRS table #masterfrm (lastrow = lastrow)

	    if (lastrow == 0)
	    {
##		PROMPT NOECHO ("There are no students [RETURN]", respbuf)
##		RESUME FIELD pname
	    }

	    /* Collect all data on student into global record */
##	    GETROW #masterfrm studenttbl 
##	        (grad.sname = sname,
##		 grad.sage = sage, 
##		 grad.sbdate = sbdate, 
##		 grad.sgpa = sgpa,
##		 grad.sidno = sidno,
##		 grad.scomment = scomment,
##		 grad.sadvisor = sadvisor)

	    /*
	    ** Display "studentfrm", and if any changes were made
	    ** make the updates to the local table field row.
	    ** Only make updates to the columns corresponding to
	    ** writable fields in "studentfrm".  If the student
	    ** changed advisors, then delete this row from the
	    ** display.
	    */
	    strcpy(old_advisor, grad.sadvisor);
	    if (Student_Info_Changed())
	    {
		if (strcmp(old_advisor, grad.sadvisor) != 0)
##		    DELETEROW #masterfrm studenttbl
		else
##		    PUTROW #masterfrm studenttbl
##			(sgpa = grad.sgpa,
##			 scomment = grad.scomment,
##			 sadvisor = grad.sadvisor)
	    }

##	}          		/* "Zoom" */

##	ACTIVATE MENUITEM "Exit"
##	{
##	    BREAKDISPLAY
##	}          		/* "Exit" */

##	FINALIZE

##} /* Master */


/*
** Procedure: Load_Students 
** Purpose:   Given an advisor name, load into the "studenttbl"
**            table field all the students who report to the
**            professor with that name.
** Parameters:
**             advisor - User specified professor name.
**             Uses the global student record.
*/

Load_Students(advisor)
##	char    *advisor;
{
	/*
	** Clear previous contents of table field. Load the table
	** field from the database table based on the advisor name.
	** Columns "sname" and "sage" will be displayed, and all
	** others will be hidden.
	*/
##	MESSAGE "Retrieving Student Information . . ."
##	CLEAR FIELD studenttbl

##	RETRIEVE 
##	    (grad.sname = s.sname, 
##	     grad.sage = s.sage, 
##	     grad.sbdate = s.sbdate, 
##	     grad.sgpa = s.sgpa,
##	     grad.sidno = s.sidno, 
##	     grad.scomment = s.scomment, 
##	     grad.sadvisor = s.sadvisor)
##	     WHERE s.sadvisor = advisor
##	{
##	    LOADTABLE #masterfrm studenttbl
##	  	(sname = grad.sname,
##	         sage = grad.sage,
##		 sbdate = grad.sbdate,
##		 sgpa = grad.sgpa,
##		 sidno = grad.sidno,
##		 scomment = grad.scomment,
##		 sadvisor = grad.sadvisor)
##	}

} /* Load_Students */


/*
** Procedure: Student_Info_Changed
** Purpose:   Allow the user to zoom into the details of a selected
**            student.  Some of the data can be updated by the user.
**            if any updates were made, then reflect these back into
**            the database table.  The procedure returns TRUE if any
**            changes were made.
** Parameters:
**            None - Uses with data in the global "grad" record.
** Returns:
**            TRUE/FALSE - Changes were made to the database.
**            Sets the global "grad" record with the new data.
*/

int
Student_Info_Changed()
##{
##	int changed;              /* Changes made to data in form */
##	int valid_advisor;        /* Valid advisor name ? */
##	globalref int *studentfrm;   /* Compiled form */

	/* Control ADDFORM to only initialize once */
	static int loadform = 0;

	if (!loadform)
	{
##	    MESSAGE "Loading Student form . . ."
##	    ADDFORM studentfrm
	    loadform = 1;
	}

##	DISPLAY #studentfrm FILL
##	INITIALIZE
##	    (sname = grad.sname,
##	     sage = grad.sage,
##	     sbdate = grad.sbdate,
##	     sgpa = grad.sgpa,
##	     sidno = grad.sidno,
##	     scomment = grad.scomment,
##	     sadvisor = grad.sadvisor)

##	ACTIVATE MENUITEM "Write"
##	{

	    /*
	    ** If changes were made then update the database
	    ** table. Only bother with the fields that are not
	    ** read-only.
	    */
##	    INQUIRE_FRS form (changed = CHANGE)

	    if (changed == 1)
	    {
##		VALIDATE
##		MESSAGE "Writing changes to database. . ."

##		GETFORM
##		    (grad.sgpa = sgpa,
##		     grad.scomment = scomment,
##		     grad.sadvisor = sadvisor)

		    /* Enforce integrity of professor name */
		    valid_advisor = 0;
##		    RETRIEVE (valid_advisor = 1)
##			WHERE p.pname = grad.sadvisor

		    if (valid_advisor == 0)
		    {
##			MESSAGE "Not a valid advisor name"
##			SLEEP 2
##			RESUME FIELD sadvisor
		    }
		    else
		    {
##			REPLACE s (sgpa = grad.sgpa, scomment = grad.scomment,
##			    sadvisor = grad.sadvisor)
##			    WHERE s.sidno = grad.sidno
##			BREAKDISPLAY
		    }
		}
##	}                  		/* "Write" */

##	ACTIVATE MENUITEM "Quit"
##	{
		/* Quit without submitting changes */
		changed = 0;
##		BREAKDISPLAY
##	}                  	/* "Quit" */

##	FINALIZE

	return (changed == 1);

##}  /* Student_Info_Changed */
!!
.else 
? fill apxe.qc 
!!
/* 
** GLOBAL declaration
** grad student record maps to database table
*/

##	struct {
##	    char   sname[26];
##	    short  sage;
##	    char   sbdate[26];
##	    float  sgpa;
##	    int   sidno;
##	    char   scomment[201];
##	    char   sadvisor[26];
##	} grad;

/*
** Procedure: MAIN
** Purpose:   Start up program and call Master driver.
*/

main(argc,argv)

int argc;

##	char*	argv[];

{
        if (argc < 2)
                {
                printf("Usage: %s <database name>\n",argv[0]);
                exit(1);
                }

	/* Start up INGRES and the FORMS system */
##	FORMS

##	MESSAGE "Initializing Student Administrator . . ."

##	INGRES argv[1]
##	RANGE of p IS professor, s IS student

	Master();

##	CLEAR SCREEN
##	ENDFORMS
##	EXIT
}


/*
** Procedure: Master
** Purpose:   Drive the application, by running "masterfrm", and
**            allowing the user to "zoom" into a selected student.
** Parameters:
**            None - Uses the global student "grad" record.
*/

Master()
##{
	/* Professor info maps to database table */
##	struct {
##		char  pname[26];
##		char  pdept[11];
##	} prof;

	/* Useful forms system information */
##	int  lastrow;	/* Lastrow in table field */
##	int  istable;	/* Is a table field? */

	/* Local utility buffers */
##	char  msgbuf[100];      /* Message buffer */
##	char  respbuf[256];     /* Response buffer */
##	char  old_advisor[26];  /* Old advisor before ZOOM */

	/* Externally compiled master form */
##	extern int *masterfrm;

##	ADDFORM masterfrm

	/*
	** Initialize "studenttbl" with a data set in READ mode.
	** Declare hidden columns for all the extra fields that
	** the program will display when more information is
	** requested about a student.  Columns "sname" and "sage"
	** are displayed, all other columns are hidden, to be
	** used in the student information form.
	*/
##	INITTABLE #masterfrm studenttbl READ
##	    (sbdate = c25,
##	     sgpa = float4,
##	     sidno = integer4,
##	     scomment = c200,
##	     sadvisor = c20)

##	DISPLAY #masterfrm UPDATE

##	INITIALIZE
##	{
##	    MESSAGE "Enter an Advisor name . . ."
##	    SLEEP 2
##	}

##	ACTIVATE MENUITEM "Students", FIELD "pname" 
##	{
	    /* Load the students of the specified professor */
##	    GETFORM (prof.pname = pname)

	    /* If no professor name is given then resume */
	    if (prof.pname[0] == '\0')
##	    RESUME FIELD pname

	    /*
	    ** Verify that the professor exists.  Local error
	    ** handling just prints the message, and continues.
	    ** We assume that each professor has exactly one
	    ** department.
	    */
##	    
	    prof.pdept[0] = '\0';
##	    RETRIEVE (prof.pdept = p.pdept)
##		WHERE p.pname = prof.pname

	    if (prof.pdept[0] == '\0')
	    {
		sprintf(msgbuf,
		    "No professor with name \"%s\" [RETURN]", prof.pname);
##		PROMPT NOECHO (msgbuf, respbuf)
##		CLEAR FIELD ALL
##		RESUME FIELD pname
	    }

	    /* Fill the department field and load students */
##	    PUTFORM (pdept = prof.pdept)
##	    REDISPLAY       	/* Refresh for query */

	    Load_Students(prof.pname);

##	    RESUME FIELD studenttbl

##	}          		/* "Students" */

##	ACTIVATE MENUITEM "Zoom"
##	{

	    /*
	    ** Confirm that user is on "studenttbl", and that
	    ** the table field is not empty.  Collect data from
	    ** the row and zoom for browsing and updating.
	    */
##	    INQUIRE_FRS field #masterfrm (istable = table)

	    if (istable == 0)
	    {
##		PROMPT NOECHO
##		    ("Select from the student table [RETURN]", respbuf)
##		RESUME FIELD studenttbl
	    }

##	    INQUIRE_FRS table #masterfrm (lastrow = lastrow)

	    if (lastrow == 0)
	    {
##		PROMPT NOECHO ("There are no students [RETURN]", respbuf)
##		RESUME FIELD pname
	    }

	    /* Collect all data on student into global record */
##	    GETROW #masterfrm studenttbl 
##	        (grad.sname = sname,
##		 grad.sage = sage, 
##		 grad.sbdate = sbdate, 
##		 grad.sgpa = sgpa,
##		 grad.sidno = sidno,
##		 grad.scomment = scomment,
##		 grad.sadvisor = sadvisor)

	    /*
	    ** Display "studentfrm", and if any changes were made
	    ** make the updates to the local table field row.
	    ** Only make updates to the columns corresponding to
	    ** writable fields in "studentfrm".  If the student
	    ** changed advisors, then delete this row from the
	    ** display.
	    */
	    strcpy(old_advisor, grad.sadvisor);
	    if (Student_Info_Changed())
	    {
		if (strcmp(old_advisor, grad.sadvisor) != 0)
##		    DELETEROW #masterfrm studenttbl
		else
##		    PUTROW #masterfrm studenttbl
##			(sgpa = grad.sgpa,
##			 scomment = grad.scomment,
##			 sadvisor = grad.sadvisor)
	    }

##	}          		/* "Zoom" */

##	ACTIVATE MENUITEM "Exit"
##	{
##	    BREAKDISPLAY
##	}          		/* "Exit" */

##	FINALIZE

##} /* Master */


/*
** Procedure: Load_Students 
** Purpose:   Given an advisor name, load into the "studenttbl"
**            table field all the students who report to the
**            professor with that name.
** Parameters:
**             advisor - User specified professor name.
**             Uses the global student record.
*/

Load_Students(advisor)
##	char    *advisor;
{
	/*
	** Clear previous contents of table field. Load the table
	** field from the database table based on the advisor name.
	** Columns "sname" and "sage" will be displayed, and all
	** others will be hidden.
	*/
##	MESSAGE "Retrieving Student Information . . ."
##	CLEAR FIELD studenttbl

##	RETRIEVE 
##	    (grad.sname = s.sname, 
##	     grad.sage = s.sage, 
##	     grad.sbdate = s.sbdate, 
##	     grad.sgpa = s.sgpa,
##	     grad.sidno = s.sidno, 
##	     grad.scomment = s.scomment, 
##	     grad.sadvisor = s.sadvisor)
##	     WHERE s.sadvisor = advisor
##	{
##	    LOADTABLE #masterfrm studenttbl
##	  	(sname = grad.sname,
##	         sage = grad.sage,
##		 sbdate = grad.sbdate,
##		 sgpa = grad.sgpa,
##		 sidno = grad.sidno,
##		 scomment = grad.scomment,
##		 sadvisor = grad.sadvisor)
##	}

} /* Load_Students */



/*
** Procedure: Student_Info_Changed
** Purpose:   Allow the user to zoom into the details of a selected
**            student.  Some of the data can be updated by the user.
**            if any updates were made, then reflect these back into
**            the database table.  The procedure returns TRUE if any
**            changes were made.
** Parameters:
**            None - Uses with data in the global "grad" record.
** Returns:
**            TRUE/FALSE - Changes were made to the database.
**            Sets the global "grad" record with the new data.
*/

int
Student_Info_Changed()
##{
##	int changed;              /* Changes made to data in form */
##	int valid_advisor;        /* Valid advisor name ? */
##	extern int *studentfrm;   /* Compiled form */

	/* Control ADDFORM to only initialize once */
	static int loadform = 0;

	if (!loadform)
	{
##	    MESSAGE "Loading Student form . . ."
##	    ADDFORM studentfrm
	    loadform = 1;
	}

##	DISPLAY #studentfrm FILL
##	INITIALIZE
##	    (sname = grad.sname,
##	     sage = grad.sage,
##	     sbdate = grad.sbdate,
##	     sgpa = grad.sgpa,
##	     sidno = grad.sidno,
##	     scomment = grad.scomment,
##	     sadvisor = grad.sadvisor)

##	ACTIVATE MENUITEM "Write"
##	{

	    /*
	    ** If changes were made then update the database
	    ** table. Only bother with the fields that are not
	    ** read-only.
	    */
##	    INQUIRE_FRS form (changed = CHANGE)

	    if (changed == 1)
	    {
##		VALIDATE
##		MESSAGE "Writing changes to database. . ."

##		GETFORM
##		    (grad.sgpa = sgpa,
##		     grad.scomment = scomment,
##		     grad.sadvisor = sadvisor)

		    /* Enforce integrity of professor name */
		    valid_advisor = 0;
##		    RETRIEVE (valid_advisor = 1)
##			WHERE p.pname = grad.sadvisor

		    if (valid_advisor == 0)
		    {
##			MESSAGE "Not a valid advisor name"
##			SLEEP 2
##			RESUME FIELD sadvisor
		    }
		    else
		    {
##			REPLACE s (sgpa = grad.sgpa, scomment = grad.scomment,
##			    sadvisor = grad.sadvisor)
##			    WHERE s.sidno = grad.sidno
##			BREAKDISPLAY
		    }
		}
##	}                  		/* "Write" */

##	ACTIVATE MENUITEM "Quit"
##	{
		/* Quit without submitting changes */
		changed = 0;
##		BREAKDISPLAY
##	}                  	/* "Quit" */

##	FINALIZE

	return (changed == 1);

##}  /* Student_Info_Changed */
!!
.endif 
? eqc apxe 
<<
~
>>
? sepcc apxe 
<<
~
>>
<<
apxe.c
>>
? seplnk apxe forms 
<<
~
>>
? ferun apxe.exe SEPPARAMDB 
<<
~
>>
^^ prof_math`CR'`ESC'
<<

%% CHANGED FIELD pname:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math_                      pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% FORM REDISPLAYED
##
__________________________________________________________________________________
|_Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% Retrieving Student Information . . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% CHANGED FIELD pname:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math_                      pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% FORM REDISPLAYED
##
__________________________________________________________________________________
|_Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% Retrieving Student Information . . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ zoom`CR'4.00;aoefin;awoefni;aowfin;aowefna;owefn;aowefn;aowefmn;aoweifna;wifa;weo-
ifha;iergujbv;aoerifhliawjenf;aeujrhnf;aw`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% Loading Student form . . .
%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  _3.20                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  I am mmm_1                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD sgpa:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  4.0_0                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  I am mmm_1                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected

%% CHANGED FIELD scomment:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|wefmn;aoweifna;wifa;weoifha;iergujbv;aoerifhliawjenf;aeujrhnf;aw                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% Loading Student form . . .
%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  _3.20                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  I am mmm_1                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD sgpa:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  4.0_0                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  I am mmm_1                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected

%% CHANGED FIELD scomment:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|wefmn;aoweifna;wifa;weoifha;iergujbv;aoerifhliawjenf;aeujrhnf;aw                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@
>>
^^ write`CR'`^J'`ESC'
<<

%% MENU RESPONSE: Write
%% MENU:   Write  Quit
%% MENU AT POSITION `0' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `0' is "Write"

%% Writing changes to database. . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Write
%% MENU:   Write  Quit
%% MENU AT POSITION `0' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `0' is "Write"

%% Writing changes to database. . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ zoom`CR'5.25`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  _3.30                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD sgpa:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  5.2_5                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD scomment:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  5.25                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  _I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  _3.30                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD sgpa:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  5.2_5                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD scomment:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  5.25                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  _I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ quit`CR'`^J'`ESC'
<<

%% MENU RESPONSE: Quit
%% MENU:   Write  Quit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Quit"

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_3                    |25  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Quit
%% MENU:   Write  Quit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Quit"

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             |-------------------------+----|                                   |
|             |_mmm_3                    |25  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ zoom`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_3                           sage:  25                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1967                    sgpa:  _3.40                        |
|                                                                                |
|                                                                                |
|     sidno:  12345680  scomment:  I am mmm_3                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_3                           sage:  25                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1967                    sgpa:  _3.40                        |
|                                                                                |
|                                                                                |
|     sidno:  12345680  scomment:  I am mmm_3                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ write`CR'`ESC'
<<
~
>>
^^ quit`CR'`ESC'
<<
~
>>
^^ students`CR'`ESC'
<<

%% MENU RESPONSE: Students
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `0' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `0' is "Students"

%% FORM REDISPLAYED
##
__________________________________________________________________________________
|_Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_3                    |25  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit  : students                                              |
__________________________________________________________________________________
@@

%% Retrieving Student Information . . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Students
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `0' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `0' is "Students"

%% FORM REDISPLAYED
##
__________________________________________________________________________________
|_Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_3                    |25  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit  : students                                              |
__________________________________________________________________________________
@@

%% Retrieving Student Information . . .
%% BROWSE loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_math                      pdept:  math                        |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |_mmm_1                    |23  |                                   |
|             |-------------------------+----|                                   |
|             |mmm_2                    |24  |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ zoom`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  _4.00                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  ;aoefin;awoefni;aowfin;aowefna                |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_1                           sage:  23                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1965                    sgpa:  _4.00                        |
|                                                                                |
|                                                                                |
|     sidno:  12345678  scomment:  ;aoefin;awoefni;aowfin;aowefna                |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ quit`CR'`^J'`ESC'
<<
~
>>
^^ zoom`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  _3.30                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_2                           sage:  24                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1966                    sgpa:  _3.30                        |
|                                                                                |
|                                                                                |
|     sidno:  12345679  scomment:  I am mmm_2                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ quit`CR'`^J'`ESC'
<<
~
>>
^^ zoom`CR'`ESC'
<<

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_3                           sage:  25                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1967                    sgpa:  _3.40                        |
|                                                                                |
|                                                                                |
|     sidno:  12345680  scomment:  I am mmm_3                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: Zoom
%% MENU:   Students  Zoom  Exit
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "Zoom"

%% INSERT loop:
##
__________________________________________________________________________________
|studentfrm of PROFESSOR-STUDENT master-detail application (detail)              |
|                                                                                |
|                                                                                |
|                                                                                |
|     sname:  mmm_3                           sage:  25                          |
|                                                                                |
|                                                                                |
|     sbdate:  12-jan-1967                    sgpa:  _3.40                        |
|                                                                                |
|                                                                                |
|     sidno:  12345680  scomment:  I am mmm_3                                    |
|                                                                                |
|                                                                                |
|     sadvisor:  prof_math                                                       |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Write  Quit                                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ quit`CR'`ESC'
<<
~
>>
^^ exit`CR'
<<
~
>>
? ferun apxe.exe SEPPARAMDB 
<<
~
>>
^^ prof_english`CR'`CR'`ESC'
<<

%% CHANGED FIELD pname:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_english_                   pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% PROMPT: No professor with name "prof_english" [RETURN] 

%% PROMPT RESPONSE: 

%%  
%% INSERT loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  _                               pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% CHANGED FIELD pname:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  prof_english_                   pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |0   |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% PROMPT: No professor with name "prof_english" [RETURN] 

%% PROMPT RESPONSE: 

%%  
%% INSERT loop:
##
__________________________________________________________________________________
|Masterfrm of PROFESSOR-STUDENT master-detail (master)                           |
|                                                                                |
|                                                                                |
|                                                                                |
|     pname:  _                               pdept:                              |
|                                                                                |
|                                                                                |
|                                                                                |
|             +------------------------------+                                   |
|             |sname                    |sage|                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             |-------------------------+----|                                   |
|             |                         |    |                                   |
|             +------------------------------+                                   |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  Students  Zoom  Exit                                                          |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ exit`CR'
<<
~
>>
? delete apxe.c 
<<
~
>>
? delete apxe.exe 
<<
~
>>
? delete apxe.obj 
<<
~
>>
? delete apxe.o 
<<
~
>>
? delete forms.olb 
<<
~
>>
? delete forms.a 
<<
~
>>
? delete masterfr 
<<
~
>>
? delete masterfr.obj 
<<
~
>>
? delete masterfr.o 
<<
~
>>
? delete studentf 
<<
~
>>
? delete studentf.obj 
<<
~
>>
? delete studentf.o 
<<
~
>>
? delobj SEPPARAMDB -form studentfrm masterfrm 
<<
~
>>


Ending at: Tue Apr 07 10:48:45 1998
