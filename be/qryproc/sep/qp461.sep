/*
  Copyright (c) 2008 Ingres Corporation

  Test Name     : qp461.sep
  Suite         : be!qryproc
  Focus         : Ingres Regression Test
                : Test for bug 119483 - E_LQ002C returned when a db procedure
                : errors and COMMIT is called.
                :
                : To test this bug E_US1069 is deliberately generated.
                :
  Databases     : SEPPARAMDB
  Tables        :
  DB Procs      : b119483_p1
  Filled Files  : 
  Copied Files  : b119483.sc
  Output Files  :
  Prerequisites : None
  Run as user   : testenv 
  Summary       : Verifies fix for bug 119483
                :
                :
  Exp. DIFFs    : None
                :
  History       : 26-Aug-2008 (wanfr01) Created.
                : 26-Aug-2008 (sarjo01) Formalized for piccolo.
                : 13-Feb-2009 (sarjo01) Recanonized for new C pgm output.
*/
? fill b119483.sc
!!
!!
? cp @file(ing_tst,be,qryproc,src,b119483.sc) b119483.sc
<<
>>
? esqlc b119483.sc
<<
ESQL b119483.sc:
>>
<<
>>
? sepcc b119483.c
<<
>>
<<
b119483.c
>>
? seplnk b119483
<<
>>
? run b119483.exe SEPPARAMDB
<<
Exec 1 start
row value: 2
row value: 3
row count: 2
Exec 1 end

Exec 2 start
row value: 1
row value: 1
row count: 2
Exec 2 end

Exec 3 start
*** sqlca.sqlcode = -40222
row count: 0
Exec 3 end


Done
>>
? delete b119483.c
<<
~
>>
? delete b119483.o
<<
~
>>
? delete b119483.obj
<<
~
>>
? delete b119483.exe
<<
~
>>
