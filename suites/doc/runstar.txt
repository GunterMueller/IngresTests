Copyright (c) 2004 Ingres Corporation


DOCUMENTATION TO RUN STAR PHASE1 SEP TESTS (UNIX/WINDOWS)
	
	Created:     10-nov-1992     (judi)
	Last edited: 31-may-1995     (holla02)Changed to use netutil
                                     instead of netu; also integrated
                                     changes originally submitted as
                                     runstar1103.doc
		     30-may-1997     (li$to01)Added the Tests Results
                                     for OI 2.0/02 (su4.us5/00)
                                     saveset 76.
                     02-June-2000    (wu$ca01) Updated with new
                                     information.
                     02-Oct-2000     (wu$ca01)Add section:Instructions
			             to run the 1PC+ Test.
                     13-Oct-2004     (legru01) Remove irrelevant information
                                     for OpenSource Acceptance Test package.

        This document describes:

         A.   The environment variables and/or flags used by this
              script.
         B.   The execution process.
         C.   Tables showing the databases, database variables, setup
              scripts, output location and .lis file names needed for
              each facility.
         D.   Monitor progress of star/phase1 test


 A.  ENVIRONMENT VARIABLES/FLAGS:

     ING_TST     This variable point to the top of your testing area
                 structure.  This variable must be set in order to
                 execute this script.  This variable should be set in
                 your environment setup file.

     TST_OUTPUT  This variable has been set in the environment setup
                 file.  This script will use this variable to point to
                 the location of the test output files generated by
                 this script.  Your test output will be directed to:

                 UNIX: $TST_OUTPUT/star/phase1
                 WINDOWS: %TST_OUTPUT%\star\phase1

     TST_CFG     This variable points to the location of the .cfg files.

                 UNIX: $ING_TST/suites/acceptst
		 WINDOWS: %ING_TST%\suites\acceptst

     TST_SHELL   This variable points to the location of the shell files.

		 UNIX: $ING_TST/suites/shell
		 WINDOWS: %ING_TST%\suites\bat

 B.  EXECUTION PROCESS:

     1. Configure INGRES/NET.

        Before the STAR tests can be run, you must set up the Ingres/NET
        configuration using netutil. Several vnodes will be setup which
	are used by this suite (snode1, snode2, snode3, snode4, snode5, snode6,
	and snode7).

	If you have already successfully executed the following script as
	'testenv':

		UNIX:	 % sh $TST_SHELL/netsetup.sh
		WINDOWS: > %TST_SHELL%\netsetup.bat

	you can proceed with the step 'Initialize the databases'. If not,
	refer to file ING_TST/suites/doc/netutil.txt to setup the required
	virtual nodes.
		
	WINDOWS ONLY:
            
            The star component must be installed before 
            test initialization is executed. To install
            it do the following:	
		
	    Example for WINXP:

		goto 'start -> settings -> control panel -> add remove programs',
		then highlight Ingres.

		- click the change/remove button
		- choose the modify option then click next
		- expand the Ingres DBMS branch
		- click the Distribution Option then click next
            	- click finish then restart Ingres as a service.

     2. Initialize the databases.

        Seven local databases, "ldb1" through "ldb7" are needed to run
        the STAR tests.  There is also a STAR database for registering
        the Local Database tables.
        
        The script can be executed in two ways: a) in its entirety, or b) by
	facility.

	 a) To initialize ALL the databases:

	    UNIX:    % sh $TST_SHELL/runstar.sh init all
	    WINDOWS: > %TST_SHELL%\runstar.bat init all

	 b) To initialize selected databases, choose the modules
	    shown between the pipes:

	    UNIX:    % sh $TST_SHELL/runstar.sh init |ldbs|ddb|
	    WINDOWS: > %TST_SHELL%\runstar.bat init |ldbs|ddb|

	This script should be run anytime if the LDB's or the STAR
	DDB has been corrupted. Some of the tests depend on the
	database being in a certain order; if a test aborts before
	completion, the databases will need to be re-initialized.

	Be sure the initialization is done and the LDB's and DDB are
	correctly initialized before going on to run the tests. Check
	the "ddb.out" and "ldb.Xout" (X = 1-7) files in the
	$TST_OUTPUT/star/phase1 or %TST_OUTPUT%\star\phase1 directory
	to make sure the LDB and DDB initialization scripts produced
	no DIFs.

	The resulting output of the initialization can be found in:

	$TST_OUTPUT/star/phase1 or %TST_OUTPUT%\star\phase1
		ddb.out
		ldb.[1-7]out
		sinitldb.rpt
		sinitddb.rpt
		sinitlrg.rpt

	The following databases will be created:
		starddb1/star
		ldb[1-7]
		starddb1

     3.  Execute the STAR tests.

	The script can be executed in two ways: a) in its entirety, or b) by
	facility. 
            
            a)  To execute the script in its entirety:

		UNIX:	 % sh $TST_SHELL/runstar.sh star all
		WINDOWS: > %TST_SHELL%\runstar.bat star all

            b)  To run selected test modules, choose the modules shown
                between the pipes:

		UNIX:	 % sh $TST_SHELL/runstar.sh star |qryproc|ddl|tpf|aggs
                                                         |pred|subs|dbproc
		WINDOWS: > %TST_SHELL%\runstar.bat star |qryproc|ddl|tpf|aggs
                                                        |pred|subs|dbproc

 C.  ADDITIONAL DOCUMENTATION BY FACILITY:

                                   
FACILITY   DATABASE       DATABASE       ($TST_CFG)	($TST_ROOT_OUTPUT)
NAME       VARIABLE       NAME           LIST FILES      OUTPUT FILES
-------------------------------------------------------------------------------
qryproc | SEPPARAMDB   starddb1/star  starqprc.lis    starqprc.rpt,*.log,*.out
-------------------------------------------------------------------------------
ddl     | SEPPARAMDB   starddb1/star  starddl.lis     starddl.rpt,*.log, *.out
-------------------------------------------------------------------------------
tpf     | SEPPARAMDB   starddb1/star  startpf.lis     startpf.rpt,*.log, *.out
-------------------------------------------------------------------------------
pred    | SEPPARAMDB   starddb1/star  spred.lis	      spred.rpt,*.log,*.out
-------------------------------------------------------------------------------
aggs    | SEPPARAMDB   starddb1/star  saggs.lis	      saggs.rpt,*.log,*.out
-------------------------------------------------------------------------------
subsel  | SEPPARAMDB   starddb1/star  ssubsel.lis     ssubsel.rpt,*.log,*.out
-------------------------------------------------------------------------------
dbproc  | SEPPARAMDB1  ldb1	      sdbproc.lis     sdbproc.rpt,*.log,*.out
        | SEPPARAMDRIVERDB -dstarddb1/star
-------------------------------------------------------------------------------


 D.  MONITOR PROGRESS OF STAR/PHASE1 TEST:

     Open 3 windows to view the performance of the test:

        1. To execute the commands to run the test suite

        2. Watch the errlog.log file
           (located in II_SYSTEM/ingres/files)
            
		UNIX/WINDOWS: 
		tail -f errlog.log

	3. To monitor the test progress, go to 
	  (located in TST_OUTPUT/star/phase1/suitename)
	
		UNIX/WINDOWS:
            	tail -f [any output file named above in section C.]

 
