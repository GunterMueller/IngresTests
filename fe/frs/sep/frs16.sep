/*
	Test Name: jca06.sep
	Time: Sun Feb  4 23:28:03 1990
	User Name: dave
 
	Test ID : (jca06)
	Module  : 
	Filename:
	Purpose	:	Testing 80/132 feature at runtime.  This test just
			makes sure that the terminal is reset to the
			original size on exit.  TERM_INGRES should be
			set to vt100w before running this test case.
	Input Files  :
	Output Files :	jca06.sc, jca06.frm
	Database     :	SEPPARAMDB
	Tables       :
        Synopsis     :  Checks that exiting the forms system from a form
                        displayed in "wide" width correctly resets the
                        terminal to a startup width of "narrow" and vice versa.
	Note	     :  Does not work under DOS.

	History	:
	  04-Feb-1990  (Dave Hung) Created
	  14-Jul-1992  (bobs)
		Added synopsis and cleaned up deletes at end of script.
	  18-Feb-1993  (jeremyb)
		Inserted -s flag after SQL and COPYFORM commands where needed
		to eliminate duplicate CANONs and DIFFs when run over HETNET
		and STAR.
          17-Jan-1996  (parmi04)
		Added an alternate canon for NT_GENERIC.
          22-Apr-1996  (clate01)
		Modified canons to work with NT
          30-Aug-1996  (Author)
          11-Mar-1997  (Author)
          14-Oct-1998  (kinte01)
		Add definitions of term_ingres for VMS
          21-NOV-1998  (peili01)
		Added VMS canons
          05-Aug-2003  (sinna02)
		Modified sep to make vt100w work on VMS.
	  10-Sep-2003  (vande02)
		The double greater than signs that mark the end of a canon
		were put at the end of the last line of a canon for the 
		copyform command and this caused this test to fail on Windows.
		Removed those extra unnecessary canons after copyform and other
		unnecessary NT canons.  Lined up history comments too.
	  16-Sep-2003  (vande02)
		Removing VMS specific canons put in by (peili01) 21-Nov-1998,
		This test runs fine on VMS without platform specific canons.
          30-Jan-2006	(boija02) Updated copyright info for Ingres Corp.

*/
? setenv TERM_INGRES vt100w 
/*
Set to use 132 mode vt100.
*/
<<
environment variable was defined
>>
? fill jca06.sc 
!!
main(argc, argv)
int	argc;
char	**argv;
{
exec sql begin declare section;
	int	error;
	char	*db;
exec sql end declare section;

exec frs forms;

	if (argc < 2)
	{
exec frs	message 'No database name on command line.  Test exiting.'
			with style = popup;
exec frs	endforms;
		return;
	}
	else
	{
		argv++;
		db = *argv;
	}

exec sql connect :db;

exec sql inquire_ingres (:error = errorno);

	if (error != 0)
	{
exec frs	message 'Error connecting to database.  Test exiting.'
			with style = popup;
exec frs	endforms;
		return;
	}

exec frs forminit jca06;

exec frs display jca06 fill;
exec frs initialize;
exec frs begin;
exec frs end;
exec frs activate menuitem 'Quit';
exec frs begin;
exec frs	breakdisplay;
exec frs end;

exec sql disconnect;

exec frs endforms;
}
!!
? fill jca06.frm 
!!
COPYFORM:	6.4	1990_02_05 07:45:40 GMT  
FORM:	jca06	FORM FOR TEST jca06	
	80	23	0	0	3	0	1	8	0	0	0	0	0	2048	0	5
FIELD:
	0	fld1	-21	15	0	12	1	18	3	11	12	0	6	fld1:	0	0	0	0	0	0	0		c12			0	0
	1	fld2	-30	5	0	12	1	18	7	17	12	0	6	fld2:	0	0	0	0	0	0	0		-i12			0	1
	2	tf	0	4	0	2	8	27	11	23	1	3	0		1	1	0	33	0	0	0					1	2
	0	col1	-21	15	0	12	1	12	0	1	12	3	1	Col1	1	1	0	0	0	0	0		c12			2	3
	1	col2	-30	5	0	12	1	12	0	14	12	3	14	Col2	14	1	0	0	0	0	0		-i12			2	4
TRIM:
	27	0	FORM JCA06 FOR TEST JCA06	0	0	0	0
!!
? copyform -s -i -r SEPPARAMDB jca06.frm 
/*
Copy form jca06 into the database.
*/
<<
INGRES COPYFORM Copyright (c) 1984, 1993 Ingres Corporation
>>
? sepesqlc jca06 
/*
Pre-process the test source file through ESQL/C.
*/
<<
ESQL jca06.sc:
>>
<<
>>
? sepcc jca06 
/*
Compile the test case.
*/
<<
>>
<< IF (NT_GENERIC) 
jca06.c
>>
? seplnk jca06 
/*
Link up the test case.
*/
<<
>>
<< IF (NT_GENERIC) 
   Creating library jca06.lib and object jca06.exp ...
>>
<<
Microsoft (R) 32-Bit Executable Linker Version 2.50.4245
Copyright (C) Microsoft Corp 1992-94. All rights reserved.

-debug:none 
-out:jca06.exe 
jca06.obj 
e:\qa\ingres\lib\ingres.lib 
msvcrt.lib 
kernel32.lib 
user32.lib 
advapi32.lib 
>>
? ferun jca06.exe SEPPARAMDB 
<<

%%     
%% INSERT loop:
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: _                                                                -
                                                   |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2:                                                             -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                       |Col1        |Col2        |                                 -
                                                 |
|                       |------------+------------|                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@
>>
<< IF (NT_GENERIC) 

%%     
%% INSERT loop:
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: _                                                                -
                                                   |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2:                                                             -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       lqqqqqqqqqqqqwqqqqqqqqqqqqk                                 -
                                                 |
|                       xCol1        xCol2        x                                 -
                                                 |
|                       tqqqqqqqqqqqqnqqqqqqqqqqqqu                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       mqqqqqqqqqqqqvqqqqqqqqqqqqj                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@
>>
^^ 1`CR'2`CR'3`CR'4`ESC'
<<

%% CHANGED FIELD fld1:
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: 1_                                                               -
                                                   |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2:                                                             -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                       |Col1        |Col2        |                                 -
                                                 |
|                       |------------+------------|                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@

%% CHANGED FIELD fld2:
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: 1                                                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2: 2_                                                         -
                                                   |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                       |Col1        |Col2        |                                 -
                                                 |
|                       |------------+------------|                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@

%% CHANGED FIELD Col1
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: 1                                                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2: 2                                                           -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                       |Col1        |Col2        |                                 -
                                                 |
|                       |------------+------------|                                 -
                                                 |
|                       |3_           |            |                               -
                                                   |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@

%% MENU KEY selected

%% CHANGED FIELD Col2
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: 1                                                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2: 2                                                           -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                       |Col1        |Col2        |                                 -
                                                 |
|                       |------------+------------|                                 -
                                                 |
|                       |3           |4_           |                               -
                                                   |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       |            |            |                                 -
                                                 |
|                       +-------------------------+                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@
>>
<< IF (NT_GENERIC) 

%% CHANGED FIELD fld1:
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: 1_                                                               -
                                                   |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2:                                                             -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       lqqqqqqqqqqqqwqqqqqqqqqqqqk                                 -
                                                 |
|                       xCol1        xCol2        x                                 -
                                                 |
|                       tqqqqqqqqqqqqnqqqqqqqqqqqqu                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       mqqqqqqqqqqqqvqqqqqqqqqqqqj                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@

%% CHANGED FIELD fld2:
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: 1                                                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2: 2_                                                         -
                                                   |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       lqqqqqqqqqqqqwqqqqqqqqqqqqk                                 -
                                                 |
|                       xCol1        xCol2        x                                 -
                                                 |
|                       tqqqqqqqqqqqqnqqqqqqqqqqqqu                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       mqqqqqqqqqqqqvqqqqqqqqqqqqj                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@

%% CHANGED FIELD Col1
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: 1                                                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2: 2                                                           -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       lqqqqqqqqqqqqwqqqqqqqqqqqqk                                 -
                                                 |
|                       xCol1        xCol2        x                                 -
                                                 |
|                       tqqqqqqqqqqqqnqqqqqqqqqqqqu                                 -
                                                 |
|                       x3_           x            x                               -
                                                   |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       mqqqqqqqqqqqqvqqqqqqqqqqqqj                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@

%% MENU KEY selected

%% CHANGED FIELD Col2
##
____________________________________________________________________________________-
__________________________________________________
|                           FORM JCA06 FOR TEST JCA06                               -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|           fld1: 1                                                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                 fld2: 2                                                           -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                       lqqqqqqqqqqqqwqqqqqqqqqqqqk                                 -
                                                 |
|                       xCol1        xCol2        x                                 -
                                                 |
|                       tqqqqqqqqqqqqnqqqqqqqqqqqqu                                 -
                                                 |
|                       x3           x4_           x                               -
                                                   |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       x            x            x                                 -
                                                 |
|                       mqqqqqqqqqqqqvqqqqqqqqqqqqj                                 -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|                                                                                   -
                                                 |
|  Quit                                                                             -
                                                 |
____________________________________________________________________________________-
__________________________________________________
@@
>>
^^ Quit`CR'
<<

%% MENU RESPONSE: Quit
%% MENU:   Quit
%% MENU AT POSITION `0' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `0' is "Quit"
>>
? delete jca06.c 
/*
Cleanup time - delete the test .C file.
*/
<<
file was deleted
>>
? delete jca06.o 
/*
Cleanup time - delete the object file on UNIX.
*/
<<
~
>>
? delete jca06.obj 
/*
Cleanup time - delete the object file on VMS.
*/
<<
~
>>
? delete jca06.exe 
/*
Cleanup time - delete the executable.
*/
<<
file was deleted
>>
? delobj SEPPARAMDB -form jca06 
/*
Cleanup time - delete form jca06 from the database.
*/
<<
INGRES DELOBJ Copyright (c) 1985, 1993 Ingres Corporation
Deleting form jca06 with owner testenv from database...
>>

Ending at: Tue Mar 11 11:38:20 1997
