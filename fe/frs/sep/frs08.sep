/*
	Test Name: jba09.sep
	Time: Wed Nov  8 20:40:26 1989
	User Name: testenv
 
	Test ID : jba09
	Module  : FRS
	Filename: jba09.sep
	Purpose	: Test simple derivation error conditions.
	Input Files  :
	Output Files :
	Database     : SEPPARAMDB
	Tables       :
	Synopsis     : Put values to and clear derived fields, both of which
		should generate error messages.  Enter bad data into a
		derivation source field.  In addition to generating an error
		message this should blank out the field's derivation dependents.
		The program should do much the same thing in the table field,
		for the same reasons.

	INGRES version: 6.4

	History	: 08-nov-1989	Created				Bruce Badash
	18-FEB-1993  (jeremyb)  inserted -s flag after SQL and COPYFORM
			commands where needed to eliminate duplicate CANONs
			and DIFFs when run over HETNET and STAR.
          19-Jan-1995	(qiuji01)  Taking new canon for delobj.
          17-Jan-1996	(parmi04)  Added an alternate canon for NT_GENERIC.
          11-Apr-1996	(clate01)
		Modified canons to work with Windows NT
          30-Aug-1996	(Author)
          11-Mar-1997	(Author)
          30-Jan-2006	(boija02) Updated copyright info for Ingres Corp.

*/
? delobj SEPPARAMDB -form jba09 
<<
INGRES DELOBJ Copyright (c) 1992, 1991 Ingres Corporation
E_DE0010 No form named jba09 and owned by testenv was found.


E_DE000C No form matching the supplied name(s) and/or pattern(s) was
    found.
 Execution ends.


>>
<<
INGRES DELOBJ Copyright (c) 1985, 1993 Ingres Corporation
Deleting form jba09 with owner testenv from database...
>>
<< IF (NT_GENERIC) 
INGRES DELOBJ Copyright (c) 1991, 1992 Ingres Corporation
E_DE0010 No form named jba09 and owned by testenv was found.


E_DE000C No form matching the supplied name(s) and/or pattern(s) was
    found.
 Execution ends.


>>
<< IF (NT_GENERIC) 
INGRES DELOBJ Copyright (c) 1991, 1992 Ingres Corporation
E_DE0010 No form named jba09 and owned by testenv was found.


E_DE000C No form matching the supplied name(s) and/or pattern(s) was
    found.
 Execution ends.


>>
<<
INGRES DELOBJ Copyright (c) 1991, 1992 Ingres Corporation
E_DE0010 No form named jba09 and owned by testenv was found.


E_DE000C No form matching the supplied name(s) and/or pattern(s) was
    found.
 Execution ends.


>>
? fill jba09.frm 
!!
COPYFORM:	6.0	1989_11_08 23:10:26 GMT  
FORM:	jba09	Used in causing derivation errors.	
	80	59	0	0	5	0	1	8	0	0	0	0	0	0	0	9
FIELD:
	0	a	-30	5	0	10	1	13	2	4	10	0	3	A:	0	0	0	0	0	0	0		-i10			0	0
	1	b	-30	5	0	10	1	13	2	25	10	0	3	B:	0	0	0	0	0	0	0		-i10			0	1
	2	c	-30	5	0	11	1	14	2	45	11	0	3	C:	0	0	0	0	2560	0	0		-i11		a + b	0	2
	3	tbl	0	4	0	4	8	41	5	4	1	3	0		1	1	0	33	0	0	0					1	3
	0	a	-30	5	0	10	1	10	0	1	10	0	1	A	1	1	0	0	0	0	0		-i10			2	4
	1	b	-30	5	0	10	1	10	0	12	10	0	12	B	12	1	0	0	0	0	0		-i10			2	5
	2	c	-30	5	0	11	1	11	0	23	11	0	23	A + B	23	1	0	0	2560	0	0		-i11		tbl.a + tbl.b	2	6
	3	d	-21	8	0	5	1	5	0	35	5	0	35	'abc'	35	1	0	0	2560	0	0		c5		'abc'	2	7
	4	suma	-30	5	0	12	2	13	14	4	12	1	1	Sum(A):	0	0	0	0	2560	0	0		-i12		sum(tbl[*].a)	0	-
8
TRIM:
	60	2	(A + B)	0	0	0	0
!!
? copyform -s -i SEPPARAMDB jba09.frm 
<<
INGRES COPYFORM Copyright (c) 1984, 1993 Ingres Corporation
>>
<< IF (NT_GENERIC) 
INGRES COPYFORM Copyright (c) 1984, 1991 Ingres Corporation
>>
<< IF (NT_GENERIC) 
INGRES COPYFORM Copyright (c) 1984, 1991 Ingres Corporation
>>
<<
INGRES COPYFORM Copyright (c) 1984, 1991 Ingres Corporation
>>
? fill jba09.sc 
!!

main(argc, argv)
int	argc;
char	**argv;
{
    exec sql begin declare section;
    int		error;
    char	*formname = "jba09";
    char	*dbname;
    exec sql end declare section;

    exec frs forms;
        if (argc < 2)
        {
exec frs        message 'No database name on command line.  Test exiting.'
                        with style = popup;
exec frs        endforms;
                return;
        }
        else
        {
                argv++;
                dbname = *argv;
        }
 
 
    exec sql connect :dbname;
 
    exec sql inquire_ingres (:error = errorno);
 
        if (error != 0)
        {
exec frs        message 'Error connecting to database.  Test exiting.'
                        with style = popup;
exec frs        endforms;
                return;
        }
 

    exec frs forminit :formname;
    exec frs inittable :formname tbl;

    exec frs display :formname;
    exec frs activate menuitem 'put_C';
    exec frs begin;
	exec frs putform :formname (c = 22);
    exec frs end;

    exec frs activate menuitem 'clear_C';
    exec frs begin;
	exec frs clear field c;
    exec frs end;

    exec frs activate menuitem 'load_C';
    exec frs begin;
	exec frs loadtable :formname tbl (c = 22);
    exec frs end;

    exec frs activate menuitem 'end';
    exec frs begin;
	exec frs breakdisplay;
    exec frs end;

    exec frs endforms;

    exec sql disconnect;
}
!!
? sepesqlc jba09 
<<
ESQL jba09.sc:
>>
<<
>>
? sepcc jba09 
<<
>>
<< IF (NT_GENERIC) 
jba09.c
>>
? seplnk jba09 
<<
>>
<< IF (NT_GENERIC) 
   Creating library jba09.lib and object jba09.exp ...
>>
<<
Microsoft (R) 32-Bit Executable Linker Version 2.50.4245
Copyright (C) Microsoft Corp 1992-94. All rights reserved.

-debug:none 
-out:jba09.exe 
jba09.obj 
e:\qa\ingres\lib\ingres.lib 
msvcrt.lib 
kernel32.lib 
user32.lib 
advapi32.lib 
>>
? ferun jba09.exe SEPPARAMDB 
<<

%%     
%% INSERT loop:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: _                  B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@
>>
<< IF (NT_GENERIC) 

%%     
%% INSERT loop:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: _                  B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@
>>
^^ `ESC'
<<

%% MENU KEY selected
>>
^^ put_C`CR'`CR'`ESC'
<<

%% MENU RESPONSE: put_C
%% MENU:   put_C  clear_C  load_C  end
%% MENU AT POSITION `0' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `0' is "put_C"

%% 
DISPLAYING ERROR MESSAGE VIA IIFDERROR.

%% 
SHORT ERROR MESSAGE IS:

%% Can not directly modify a DERIVED field.  ... 

%% 
END OF SHORT ERROR MESSAGE.

%% INSERT loop:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: _                  B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: put_C
%% MENU:   put_C  clear_C  load_C  end
%% MENU AT POSITION `0' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `0' is "put_C"

%% 
DISPLAYING ERROR MESSAGE VIA IIFDERROR.

%% 
SHORT ERROR MESSAGE IS:

%% Can not directly modify a DERIVED field.  ... 

%% 
END OF SHORT ERROR MESSAGE.

%% INSERT loop:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: _                  B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ clear_C`CR'`CR'`ESC'
<<

%% MENU RESPONSE: clear_C
%% MENU:   put_C  clear_C  load_C  end
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "clear_C"

%% 
DISPLAYING ERROR MESSAGE VIA IIFDERROR.

%% 
SHORT ERROR MESSAGE IS:

%% Can not directly modify a DERIVED field.  ... 

%% 
END OF SHORT ERROR MESSAGE.

%% INSERT loop:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: _                  B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: clear_C
%% MENU:   put_C  clear_C  load_C  end
%% MENU AT POSITION `1' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `1' is "clear_C"

%% 
DISPLAYING ERROR MESSAGE VIA IIFDERROR.

%% 
SHORT ERROR MESSAGE IS:

%% Can not directly modify a DERIVED field.  ... 

%% 
END OF SHORT ERROR MESSAGE.

%% INSERT loop:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: _                  B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% MENU KEY selected
>>
^^ load_C`CR'`CR'1`CR'2`CR'`^P'`^P'abc`CR'`CR'`ESC'
<<

%% MENU RESPONSE: load_C
%% MENU:   put_C  clear_C  load_C  end
%% MENU AT POSITION `2' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `2' is "load_C"

%% 
DISPLAYING ERROR MESSAGE VIA IIFDERROR.

%% 
SHORT ERROR MESSAGE IS:

%% Can not directly modify a DERIVED field.  ... 

%% 
END OF SHORT ERROR MESSAGE.

%% INSERT loop:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: _                  B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD A:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: 1_                 B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD B:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: 1                 B: 2_                C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD A:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: abc_               B: 2                C: 3           (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% 
DISPLAYING ERROR MESSAGE VIA IIFDERROR.

%% 
SHORT ERROR MESSAGE IS:

%% The field only accepts a valid integer.  ... 

%% 
END OF SHORT ERROR MESSAGE.

%% MENU KEY selected
>>
<< IF (NT_GENERIC) 

%% MENU RESPONSE: load_C
%% MENU:   put_C  clear_C  load_C  end
%% MENU AT POSITION `2' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `2' is "load_C"

%% 
DISPLAYING ERROR MESSAGE VIA IIFDERROR.

%% 
SHORT ERROR MESSAGE IS:

%% Can not directly modify a DERIVED field.  ... 

%% 
END OF SHORT ERROR MESSAGE.

%% INSERT loop:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: _                  B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD A:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: 1_                 B:                  C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD B:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: 1                 B: 2_                C:             (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% CHANGED FIELD A:
##
__________________________________________________________________________________
|                                                                                |
|                                                                                |
|    A: abc_               B: 2                C: 3           (A + B)             |
|                                                                                |
|                                                                                |
|    +---------------------------------------+                                   |
|    |A         |B         |A + B      |'abc'|                                   |
|    |----------+----------+-----------+-----|                                   |
|    |          |          |           |abc  |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    |          |          |           |     |                                   |
|    +---------------------------------------+                                   |
|                                                                                |
|    Sum(A):                                                                     |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|                                                                                |
|  put_C  clear_C  load_C  end                                                   |
__________________________________________________________________________________
@@

%% 
DISPLAYING ERROR MESSAGE VIA IIFDERROR.

%% 
SHORT ERROR MESSAGE IS:

%% The field only accepts a valid integer.  ... 

%% 
END OF SHORT ERROR MESSAGE.

%% MENU KEY selected
>>
^^ end`CR'
<<

%% MENU RESPONSE: end
%% MENU:   put_C  clear_C  load_C  end
%% MENU AT POSITION `3' SELECTED VIA A FUNCTION/PF KEY

%% MENU AT POSITION `3' is "end"
>>
? delete jba09.c 
<<
file was deleted
>>
? delete jba09.o 
<<
file was deleted
>>
<<
file was not found
>>
? delete jba09.obj 
<<
file was not found
>>
<<
file was deleted
>>
? delete jba09.exe 
<<
file was deleted
>>
? delobj SEPPARAMDB -form jba09 
<<
INGRES DELOBJ Copyright (c) 1985, 1993 Ingres Corporation
Deleting form jba09 with owner testenv from database...
>>
<< IF (NT_GENERIC) 
INGRES DELOBJ Copyright (c) 1991, 1992 Ingres Corporation
Deleting form jba09 with owner testenv from database...

>>
<< IF (NT_GENERIC) 
INGRES DELOBJ Copyright (c) 1991, 1992 Ingres Corporation
Deleting form jba09 with owner testenv from database...

>>
<<
INGRES DELOBJ Copyright (c) 1991, 1992 Ingres Corporation
Deleting form jba09 with owner testenv from database...

>>


Ending at: Tue Mar 11 10:34:05 1997
